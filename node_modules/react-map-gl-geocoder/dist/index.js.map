{"version":3,"file":"index.js","sources":["../node_modules/react-is/cjs/react-is.production.min.js","../node_modules/react-is/cjs/react-is.development.js","../node_modules/react-is/index.js","../node_modules/object-assign/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/prop-types/checkPropTypes.js","../node_modules/prop-types/factoryWithTypeCheckers.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../node_modules/xtend/immutable.js","../node_modules/fuzzy/lib/fuzzy.js","../node_modules/suggestions/src/list.js","../node_modules/suggestions/src/suggestions.js","../node_modules/suggestions/index.js","../node_modules/lodash.debounce/index.js","../node_modules/@mapbox/mapbox-gl-geocoder/lib/exceptions.js","../node_modules/@mapbox/mapbox-sdk/lib/helpers/parse-link-header.js","../node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-response.js","../node_modules/@mapbox/mapbox-sdk/lib/constants.js","../node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-error.js","../node_modules/@mapbox/mapbox-sdk/lib/browser/browser-layer.js","../node_modules/base-64/base64.js","../node_modules/@mapbox/parse-mapbox-token/index.js","../node_modules/eventemitter3/index.js","../node_modules/@mapbox/mapbox-sdk/lib/helpers/url-utils.js","../node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-request.js","../node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-client.js","../node_modules/@mapbox/mapbox-sdk/lib/browser/browser-client.js","../node_modules/@mapbox/mapbox-sdk/lib/helpers/parse-headers.js","../node_modules/@mapbox/mapbox-sdk/index.js","../node_modules/is-plain-obj/index.js","../node_modules/@mapbox/fusspot/lib/index.js","../node_modules/@mapbox/mapbox-sdk/services/service-helpers/validator.js","../node_modules/@mapbox/mapbox-sdk/services/service-helpers/pick.js","../node_modules/@mapbox/mapbox-sdk/services/service-helpers/stringify-booleans.js","../node_modules/@mapbox/mapbox-sdk/services/service-helpers/object-map.js","../node_modules/@mapbox/mapbox-sdk/services/geocoding.js","../node_modules/@mapbox/mapbox-sdk/services/service-helpers/create-service-factory.js","../node_modules/nanoid/index.browser.js","../node_modules/@mapbox/mapbox-gl-geocoder/lib/events.js","../node_modules/@mapbox/mapbox-gl-geocoder/lib/localization.js","../node_modules/subtag/subtag.js","../node_modules/@mapbox/mapbox-gl-geocoder/lib/index.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/gl-matrix/esm/common.js","../node_modules/gl-matrix/esm/vec4.js","../node_modules/viewport-mercator-project/dist/esm/math-utils.js","../node_modules/gl-matrix/esm/mat4.js","../node_modules/gl-matrix/esm/vec2.js","../node_modules/viewport-mercator-project/dist/esm/assert.js","../node_modules/gl-matrix/esm/vec3.js","../node_modules/viewport-mercator-project/dist/esm/web-mercator-utils.js","../node_modules/viewport-mercator-project/dist/esm/viewport.js","../node_modules/viewport-mercator-project/dist/esm/fit-bounds.js","../node_modules/viewport-mercator-project/dist/esm/web-mercator-viewport.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../src/index.js"],"sourcesContent":["/** @license React v16.8.6\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:!0});\nvar b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?Symbol.for(\"react.memo\"):\n60115,r=b?Symbol.for(\"react.lazy\"):60116;function t(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case h:return a;default:return u}}case r:case q:case d:return u}}}function v(a){return t(a)===m}exports.typeOf=t;exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;\nexports.Fragment=e;exports.Lazy=r;exports.Memo=q;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||\"object\"===typeof a&&null!==a&&(a.$$typeof===r||a.$$typeof===q||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n)};exports.isAsyncMode=function(a){return v(a)||t(a)===l};exports.isConcurrentMode=v;exports.isContextConsumer=function(a){return t(a)===k};\nexports.isContextProvider=function(a){return t(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return t(a)===n};exports.isFragment=function(a){return t(a)===e};exports.isLazy=function(a){return t(a)===r};exports.isMemo=function(a){return t(a)===q};exports.isPortal=function(a){return t(a)===d};exports.isProfiler=function(a){return t(a)===g};exports.isStrictMode=function(a){return t(a)===f};\nexports.isSuspense=function(a){return t(a)===p};\n","/** @license React v16.8.6\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\n\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace;\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' ||\n  // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE);\n}\n\n/**\n * Forked from fbjs/warning:\n * https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/__forks__/warning.js\n *\n * Only change is we use console.warn instead of console.error,\n * and do nothing when 'console' is not supported.\n * This really simplifies the code.\n * ---\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar lowPriorityWarning = function () {};\n\n{\n  var printWarning = function (format) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n    if (typeof console !== 'undefined') {\n      console.warn(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  lowPriorityWarning = function (condition, format) {\n    if (format === undefined) {\n      throw new Error('`lowPriorityWarning(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n    if (!condition) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      printWarning.apply(undefined, [format].concat(args));\n    }\n  };\n}\n\nvar lowPriorityWarning$1 = lowPriorityWarning;\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n              default:\n                return $$typeof;\n            }\n        }\n      case REACT_LAZY_TYPE:\n      case REACT_MEMO_TYPE:\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n}\n\n// AsyncMode is deprecated along with isAsyncMode\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\n\nvar hasWarnedAboutDeprecatedIsAsyncMode = false;\n\n// AsyncMode should be deprecated\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true;\n      lowPriorityWarning$1(false, 'The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.typeOf = typeOf;\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isValidElementType = isValidElementType;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar has = Function.call.bind(Object.prototype.hasOwnProperty);\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","/*\n * Fuzzy\n * https://github.com/myork/fuzzy\n *\n * Copyright (c) 2012 Matt York\n * Licensed under the MIT license.\n */\n\n(function() {\n\nvar root = this;\n\nvar fuzzy = {};\n\n// Use in node or in browser\nif (typeof exports !== 'undefined') {\n  module.exports = fuzzy;\n} else {\n  root.fuzzy = fuzzy;\n}\n\n// Return all elements of `array` that have a fuzzy\n// match against `pattern`.\nfuzzy.simpleFilter = function(pattern, array) {\n  return array.filter(function(str) {\n    return fuzzy.test(pattern, str);\n  });\n};\n\n// Does `pattern` fuzzy match `str`?\nfuzzy.test = function(pattern, str) {\n  return fuzzy.match(pattern, str) !== null;\n};\n\n// If `pattern` matches `str`, wrap each matching character\n// in `opts.pre` and `opts.post`. If no match, return null\nfuzzy.match = function(pattern, str, opts) {\n  opts = opts || {};\n  var patternIdx = 0\n    , result = []\n    , len = str.length\n    , totalScore = 0\n    , currScore = 0\n    // prefix\n    , pre = opts.pre || ''\n    // suffix\n    , post = opts.post || ''\n    // String to compare against. This might be a lowercase version of the\n    // raw string\n    , compareString =  opts.caseSensitive && str || str.toLowerCase()\n    , ch;\n\n  pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n  // For each character in the string, either add it to the result\n  // or wrap in template if it's the next string in the pattern\n  for(var idx = 0; idx < len; idx++) {\n    ch = str[idx];\n    if(compareString[idx] === pattern[patternIdx]) {\n      ch = pre + ch + post;\n      patternIdx += 1;\n\n      // consecutive characters should increase the score more than linearly\n      currScore += 1 + currScore;\n    } else {\n      currScore = 0;\n    }\n    totalScore += currScore;\n    result[result.length] = ch;\n  }\n\n  // return rendered string if we have a match for every char\n  if(patternIdx === pattern.length) {\n    // if the string is an exact match with pattern, totalScore should be maxed\n    totalScore = (compareString === pattern) ? Infinity : totalScore;\n    return {rendered: result.join(''), score: totalScore};\n  }\n\n  return null;\n};\n\n// The normal entry point. Filters `arr` for matches against `pattern`.\n// It returns an array with matching values of the type:\n//\n//     [{\n//         string:   '<b>lah' // The rendered string\n//       , index:    2        // The index of the element in `arr`\n//       , original: 'blah'   // The original element in `arr`\n//     }]\n//\n// `opts` is an optional argument bag. Details:\n//\n//    opts = {\n//        // string to put before a matching character\n//        pre:     '<b>'\n//\n//        // string to put after matching character\n//      , post:    '</b>'\n//\n//        // Optional function. Input is an entry in the given arr`,\n//        // output should be the string to test `pattern` against.\n//        // In this example, if `arr = [{crying: 'koala'}]` we would return\n//        // 'koala'.\n//      , extract: function(arg) { return arg.crying; }\n//    }\nfuzzy.filter = function(pattern, arr, opts) {\n  if(!arr || arr.length === 0) {\n    return [];\n  }\n  if (typeof pattern !== 'string') {\n    return arr;\n  }\n  opts = opts || {};\n  return arr\n    .reduce(function(prev, element, idx, arr) {\n      var str = element;\n      if(opts.extract) {\n        str = opts.extract(element);\n      }\n      var rendered = fuzzy.match(pattern, str, opts);\n      if(rendered != null) {\n        prev[prev.length] = {\n            string: rendered.rendered\n          , score: rendered.score\n          , index: idx\n          , original: element\n        };\n      }\n      return prev;\n    }, [])\n\n    // Sort by score. Browsers are inconsistent wrt stable/unstable\n    // sorting, so force stable by using the index in the case of tie.\n    // See http://ofb.net/~sethml/is-sort-stable.html\n    .sort(function(a,b) {\n      var compare = b.score - a.score;\n      if(compare) return compare;\n      return a.index - b.index;\n    });\n};\n\n\n}());\n\n","'Use strict';\n\nvar List = function(component) {\n  this.component = component;\n  this.items = [];\n  this.active = 0;\n  this.wrapper = document.createElement('div');\n  this.wrapper.className = 'suggestions-wrapper';\n  this.element = document.createElement('ul');\n  this.element.className = 'suggestions';\n  this.wrapper.appendChild(this.element);\n\n  // selectingListItem is set to true in the time between the mousedown and mouseup when clicking an item in the list\n  // mousedown on a list item will cause the input to blur which normally hides the list, so this flag is used to keep\n  // the list open until the mouseup\n  this.selectingListItem = false;\n\n  component.el.parentNode.insertBefore(this.wrapper, component.el.nextSibling);\n  return this;\n};\n\nList.prototype.show = function() {\n  this.element.style.display = 'block';\n};\n\nList.prototype.hide = function() {\n  this.element.style.display = 'none';\n};\n\nList.prototype.add = function(item) {\n  this.items.push(item);\n};\n\nList.prototype.clear = function() {\n  this.items = [];\n  this.active = 0;\n};\n\nList.prototype.isEmpty = function() {\n  return !this.items.length;\n};\n\nList.prototype.isVisible = function() {\n  return this.element.style.display === 'block';\n};\n\nList.prototype.draw = function() {\n  this.element.innerHTML = '';\n\n  if (this.items.length === 0) {\n    this.hide();\n    return;\n  }\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.drawItem(this.items[i], this.active === i);\n  }\n\n  this.show();\n};\n\nList.prototype.drawItem = function(item, active) {\n  var li = document.createElement('li'),\n    a = document.createElement('a');\n\n  if (active) li.className += ' active';\n\n  a.innerHTML = item.string;\n\n  li.appendChild(a);\n  this.element.appendChild(li);\n\n  li.addEventListener('mousedown', function() {\n    this.selectingListItem = true;\n  }.bind(this));\n\n  li.addEventListener('mouseup', function() {\n    this.handleMouseUp.call(this, item);\n  }.bind(this));\n};\n\nList.prototype.handleMouseUp = function(item) {\n  this.selectingListItem = false;\n  this.component.value(item.original);\n  this.clear();\n  this.draw();\n};\n\nList.prototype.move = function(index) {\n  this.active = index;\n  this.draw();\n};\n\nList.prototype.previous = function() {\n  this.move(this.active === 0 ? this.items.length - 1 : this.active - 1);\n};\n\nList.prototype.next = function() {\n  this.move(this.active === this.items.length - 1 ? 0 : this.active + 1);\n};\n\nList.prototype.drawError = function(msg){\n  var li = document.createElement('li');\n\n  li.innerHTML = msg;\n\n  this.element.appendChild(li);\n  this.show();\n}\n\nmodule.exports = List;\n","'use strict';\n\nvar extend = require('xtend');\nvar fuzzy = require('fuzzy');\nvar List = require('./list');\n\nvar Suggestions = function(el, data, options) {\n  options = options || {};\n\n  this.options = extend({\n    minLength: 2,\n    limit: 5,\n    filter: true\n  }, options);\n\n  this.el = el;\n  this.data = data || [];\n  this.list = new List(this);\n\n  this.query = '';\n  this.selected = null;\n\n  this.list.draw();\n\n  this.el.addEventListener('keyup', function(e) {\n    this.handleKeyUp(e.keyCode);\n  }.bind(this), false);\n\n  this.el.addEventListener('keydown', function(e) {\n    this.handleKeyDown(e);\n  }.bind(this));\n\n  this.el.addEventListener('focus', function() {\n    this.handleFocus();\n  }.bind(this));\n\n  this.el.addEventListener('blur', function() {\n    this.handleBlur();\n  }.bind(this));\n\n  this.el.addEventListener('paste', function(e) {\n    this.handlePaste(e);\n  }.bind(this));\n\n  // use user-provided render function if given, otherwise just use the default\n  this.render = (this.options.render) ? this.options.render.bind(this) : this.render.bind(this)\n\n  this.getItemValue = (this.options.getItemValue) ? this.options.getItemValue.bind(this) : this.getItemValue.bind(this);\n\n  return this;\n};\n\nSuggestions.prototype.handleKeyUp = function(keyCode) {\n  // 40 - DOWN\n  // 38 - UP\n  // 27 - ESC\n  // 13 - ENTER\n  // 9 - TAB\n\n  if (keyCode === 40 ||\n      keyCode === 38 ||\n      keyCode === 27 ||\n      keyCode === 13 ||\n      keyCode === 9) return;\n\n  this.handleInputChange(this.el.value);\n};\n\nSuggestions.prototype.handleKeyDown = function(e) {\n  switch (e.keyCode) {\n    case 13: // ENTER\n    case 9: // TAB\n      if (!this.list.isEmpty()) {\n        if (this.list.isVisible()) {\n          e.preventDefault();\n        }\n        this.value(this.list.items[this.list.active].original);\n        this.list.hide();\n      }\n    break;\n    case 27: // ESC\n      if (!this.list.isEmpty()) this.list.hide();\n    break;\n    case 38: // UP\n      this.list.previous();\n    break;\n    case 40: // DOWN\n      this.list.next();\n    break;\n  }\n};\n\nSuggestions.prototype.handleBlur = function() {\n  if (!this.list.selectingListItem) {\n    this.list.hide();\n  }\n};\n\nSuggestions.prototype.handlePaste = function(e) {\n  if (e.clipboardData) {\n    this.handleInputChange(e.clipboardData.getData('Text'));\n  } else {\n    var self = this;\n    setTimeout(function () {\n      self.handleInputChange(e.target.value);\n    }, 100);\n  }\n};\n\nSuggestions.prototype.handleInputChange = function(query) {\n  this.query = this.normalize(query);\n\n  this.list.clear();\n\n  if (this.query.length < this.options.minLength) {\n    this.list.draw();\n    return;\n  }\n\n  this.getCandidates(function(data) {\n    for (var i = 0; i < data.length; i++) {\n      this.list.add(data[i]);\n      if (i === (this.options.limit - 1)) break;\n    }\n    this.list.draw();\n  }.bind(this));\n};\n\nSuggestions.prototype.handleFocus = function() {\n  if (!this.list.isEmpty()) this.list.show();\n  this.list.selectingListItem = false;\n};\n\n/**\n * Update data previously passed\n *\n * @param {Array} revisedData\n */\nSuggestions.prototype.update = function(revisedData) {\n  this.data = revisedData;\n  this.handleKeyUp();\n};\n\n/**\n * Clears data\n */\nSuggestions.prototype.clear = function() {\n  this.data = [];\n  this.list.clear();\n};\n\n/**\n * Normalize the results list and input value for matching\n *\n * @param {String} value\n * @return {String}\n */\nSuggestions.prototype.normalize = function(value) {\n  value = value.toLowerCase();\n  return value;\n};\n\n/**\n * Evaluates whether an array item qualifies as a match with the current query\n *\n * @param {String} candidate a possible item from the array passed\n * @param {String} query the current query\n * @return {Boolean}\n */\nSuggestions.prototype.match = function(candidate, query) {\n  return candidate.indexOf(query) > -1;\n};\n\nSuggestions.prototype.value = function(value) {\n  this.selected = value;\n  this.el.value = this.getItemValue(value);\n\n  if (document.createEvent) {\n    var e = document.createEvent('HTMLEvents');\n    e.initEvent('change', true, false);\n    this.el.dispatchEvent(e);\n  } else {\n    this.el.fireEvent('onchange');\n  }\n};\n\nSuggestions.prototype.getCandidates = function(callback) {\n  var options = {\n    pre: '<strong>',\n    post: '</strong>',\n    extract: function(d) { return this.getItemValue(d); }.bind(this)\n  };\n  var results;\n  if(this.options.filter){\n    results = fuzzy.filter(this.query, this.data, options);\n\n    results = results.map(function(item){\n      return {\n        original: item.original,\n        string: this.render(item.original, item.string)\n      };\n    }.bind(this))\n  }else{\n    results = this.data.map(function(d) {\n      var renderedString = this.render(d);\n      return {\n        original: d,\n        string: renderedString\n      };\n    }.bind(this));\n  }\n  callback(results);\n};\n\n/**\n * For a given item in the data array, return what should be used as the candidate string\n *\n * @param {Object|String} item an item from the data array\n * @return {String} item\n */\nSuggestions.prototype.getItemValue = function(item) {\n  return item;\n};\n\n/**\n * For a given item in the data array, return a string of html that should be rendered in the dropdown\n * @param {Object|String} item an item from the data array\n * @param {String} sourceFormatting a string that has pre-formatted html that should be passed directly through the render function \n * @return {String} html\n */\nSuggestions.prototype.render = function(item, sourceFormatting) {\n  if (sourceFormatting){\n    // use existing formatting on the source string\n    return sourceFormatting;\n  }\n  var boldString = (item.original) ? this.getItemValue(item.original) : this.getItemValue(item);\n  var indexString = this.normalize(boldString);\n  var indexOfQuery = indexString.lastIndexOf(this.query);\n  while (indexOfQuery > -1) {\n    var endIndexOfQuery = indexOfQuery + this.query.length;\n    boldString = boldString.slice(0, indexOfQuery) + '<strong>' + boldString.slice(indexOfQuery, endIndexOfQuery) + '</strong>' + boldString.slice(endIndexOfQuery);\n    indexOfQuery = indexString.slice(0, indexOfQuery).lastIndexOf(this.query);\n  }\n  return boldString\n}\n\n/**\n * Render an custom error message in the suggestions list\n * @param {String} msg An html string to render as an error message\n */\nSuggestions.prototype.renderError = function(msg){\n  this.list.drawError(msg);\n}\n\nmodule.exports = Suggestions;","'use strict';\n\n/**\n * A typeahead component for inputs\n * @class Suggestions\n *\n * @param {HTMLInputElement} el A valid HTML input element\n * @param {Array} data An array of data used for results\n * @param {Object} options\n * @param {Number} [options.limit=5] Max number of results to display in the auto suggest list.\n * @param {Number} [options.minLength=2] Number of characters typed into an input to trigger suggestions.\n * @return {Suggestions} `this`\n * @example\n * // in the browser\n * var input = document.querySelector('input');\n * var data = [\n *   'Roy Eldridge',\n *   'Roy Hargrove',\n *   'Rex Stewart'\n * ];\n *\n * new Suggestions(input, data);\n *\n * // with options\n * var input = document.querySelector('input');\n * var data = [{\n *   name: 'Roy Eldridge',\n *   year: 1911\n * }, {\n *   name: 'Roy Hargrove',\n *   year: 1969\n * }, {\n *   name: 'Rex Stewart',\n *   year: 1907\n * }];\n *\n * var typeahead = new Suggestions(input, data, {\n *   filter: false, // Disable filtering\n *   minLength: 3, // Number of characters typed into an input to trigger suggestions.\n *   limit: 3 //  Max number of results to display.\n * });\n *\n * // As we're passing an object of an arrays as data, override\n * // `getItemValue` by specifying the specific property to search on.\n * typeahead.getItemValue = function(item) { return item.name };\n *\n * input.addEventListener('change', function() {\n *   console.log(typeahead.selected); // Current selected item.\n * });\n *\n * // With browserify\n * var Suggestions = require('suggestions');\n *\n * new Suggestions(input, data);\n */\nvar Suggestions = require('./src/suggestions');\nwindow.Suggestions = module.exports = Suggestions;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","module.exports = {\n  'fr': {\n    'name': 'France',\n    'bbox': [[-4.59235, 41.380007], [9.560016, 51.148506]]\n  },\n  'us': {\n    'name': 'United States',\n    'bbox': [[-171.791111, 18.91619], [-66.96466, 71.357764]]\n  },\n  'ru': {\n    'name': 'Russia',\n    'bbox': [[19.66064, 41.151416], [190.10042, 81.2504]]\n  },\n  'ca': {\n    'name': 'Canada',\n    'bbox': [[-140.99778, 41.675105], [-52.648099, 83.23324]]\n  }\n};\n","'use strict';\n\n// Like https://github.com/thlorenz/lib/parse-link-header but without any\n// additional dependencies.\n\nfunction parseParam(param) {\n  var parts = param.match(/\\s*(.+)\\s*=\\s*\"?([^\"]+)\"?/);\n  if (!parts) return null;\n\n  return {\n    key: parts[1],\n    value: parts[2]\n  };\n}\n\nfunction parseLink(link) {\n  var parts = link.match(/<?([^>]*)>(.*)/);\n  if (!parts) return null;\n\n  var linkUrl = parts[1];\n  var linkParams = parts[2].split(';');\n  var rel = null;\n  var parsedLinkParams = linkParams.reduce(function(result, param) {\n    var parsed = parseParam(param);\n    if (!parsed) return result;\n    if (parsed.key === 'rel') {\n      if (!rel) {\n        rel = parsed.value;\n      }\n      return result;\n    }\n    result[parsed.key] = parsed.value;\n    return result;\n  }, {});\n  if (!rel) return null;\n\n  return {\n    url: linkUrl,\n    rel: rel,\n    params: parsedLinkParams\n  };\n}\n\n/**\n * Parse a Link header.\n *\n * @param {string} linkHeader\n * @returns {{\n *   [string]: {\n *     url: string,\n *     params: { [string]: string }\n *   }\n * }}\n */\nfunction parseLinkHeader(linkHeader) {\n  if (!linkHeader) return {};\n\n  return linkHeader.split(/,\\s*</).reduce(function(result, link) {\n    var parsed = parseLink(link);\n    if (!parsed) return result;\n    // rel value can be multiple whitespace-separated rels.\n    var splitRel = parsed.rel.split(/\\s+/);\n    splitRel.forEach(function(rel) {\n      if (!result[rel]) {\n        result[rel] = {\n          url: parsed.url,\n          params: parsed.params\n        };\n      }\n    });\n    return result;\n  }, {});\n}\n\nmodule.exports = parseLinkHeader;\n","'use strict';\n\nvar parseLinkHeader = require('../helpers/parse-link-header');\n\n/**\n * A Mapbox API response.\n *\n * @class MapiResponse\n * @property {Object} body - The response body, parsed as JSON.\n * @property {string} rawBody - The raw response body.\n * @property {number} statusCode - The response's status code.\n * @property {Object} headers - The parsed response headers.\n * @property {Object} links - The parsed response links.\n * @property {MapiRequest} request - The response's originating `MapiRequest`.\n */\n\n/**\n * @ignore\n * @param {MapiRequest} request\n * @param {Object} responseData\n * @param {Object} responseData.headers\n * @param {string} responseData.body\n * @param {number} responseData.statusCode\n */\nfunction MapiResponse(request, responseData) {\n  this.request = request;\n  this.headers = responseData.headers;\n  this.rawBody = responseData.body;\n  this.statusCode = responseData.statusCode;\n  try {\n    this.body = JSON.parse(responseData.body || '{}');\n  } catch (parseError) {\n    this.body = responseData.body;\n  }\n  this.links = parseLinkHeader(this.headers.link);\n}\n\n/**\n * Check if there is a next page that you can fetch.\n *\n * @returns {boolean}\n */\nMapiResponse.prototype.hasNextPage = function hasNextPage() {\n  return !!this.links.next;\n};\n\n/**\n * Create a request for the next page, if there is one.\n * If there is no next page, returns `null`.\n *\n * @returns {MapiRequest | null}\n */\nMapiResponse.prototype.nextPage = function nextPage() {\n  if (!this.hasNextPage()) return null;\n  return this.request._extend({\n    path: this.links.next.url\n  });\n};\n\nmodule.exports = MapiResponse;\n","'use strict';\n\nmodule.exports = {\n  API_ORIGIN: 'https://api.mapbox.com',\n  EVENT_PROGRESS_DOWNLOAD: 'downloadProgress',\n  EVENT_PROGRESS_UPLOAD: 'uploadProgress',\n  EVENT_ERROR: 'error',\n  EVENT_RESPONSE: 'response',\n  ERROR_HTTP: 'HttpError',\n  ERROR_REQUEST_ABORTED: 'RequestAbortedError'\n};\n","'use strict';\n\nvar constants = require('../constants');\n\n/**\n * A Mapbox API error.\n *\n * If there's an error during the API transaction,\n * the Promise returned by `MapiRequest`'s [`send`](#send)\n * method should reject with a `MapiError`.\n *\n * @class MapiError\n * @hideconstructor\n * @property {MapiRequest} request - The errored request.\n * @property {string} type - The type of error. Usually this is `'HttpError'`.\n *   If the request was aborted, so the error was\n *   not sent from the server, the type will be\n *   `'RequestAbortedError'`.\n * @property {number} [statusCode] - The numeric status code of\n *   the HTTP response.\n * @property {Object | string} [body] - If the server sent a response body,\n *   this property exposes that response, parsed as JSON if possible.\n * @property {string} [message] - Whatever message could be derived from the\n *   call site and HTTP response.\n *\n * @param {MapiRequest} options.request\n * @param {number} [options.statusCode]\n * @param {string} [options.body]\n * @param {string} [options.message]\n * @param {string} [options.type]\n */\nfunction MapiError(options) {\n  var errorType = options.type || constants.ERROR_HTTP;\n\n  var body;\n  if (options.body) {\n    try {\n      body = JSON.parse(options.body);\n    } catch (e) {\n      body = options.body;\n    }\n  } else {\n    body = null;\n  }\n\n  var message = options.message || null;\n  if (!message) {\n    if (typeof body === 'string') {\n      message = body;\n    } else if (body && typeof body.message === 'string') {\n      message = body.message;\n    } else if (errorType === constants.ERROR_REQUEST_ABORTED) {\n      message = 'Request aborted';\n    }\n  }\n\n  this.message = message;\n  this.type = errorType;\n  this.statusCode = options.statusCode || null;\n  this.request = options.request;\n  this.body = body;\n}\n\nmodule.exports = MapiError;\n","'use strict';\n\nvar MapiResponse = require('../classes/mapi-response');\nvar MapiError = require('../classes/mapi-error');\nvar constants = require('../constants');\nvar parseHeaders = require('../helpers/parse-headers');\n\n// Keys are request IDs, values are XHRs.\nvar requestsUnderway = {};\n\nfunction browserAbort(request) {\n  var xhr = requestsUnderway[request.id];\n  if (!xhr) return;\n  xhr.abort();\n  delete requestsUnderway[request.id];\n}\n\nfunction createResponse(request, xhr) {\n  return new MapiResponse(request, {\n    body: xhr.response,\n    headers: parseHeaders(xhr.getAllResponseHeaders()),\n    statusCode: xhr.status\n  });\n}\n\nfunction normalizeBrowserProgressEvent(event) {\n  var total = event.total;\n  var transferred = event.loaded;\n  var percent = (100 * transferred) / total;\n  return {\n    total: total,\n    transferred: transferred,\n    percent: percent\n  };\n}\n\nfunction sendRequestXhr(request, xhr) {\n  return new Promise(function(resolve, reject) {\n    xhr.onprogress = function(event) {\n      request.emitter.emit(\n        constants.EVENT_PROGRESS_DOWNLOAD,\n        normalizeBrowserProgressEvent(event)\n      );\n    };\n\n    var file = request.file;\n    if (file) {\n      xhr.upload.onprogress = function(event) {\n        request.emitter.emit(\n          constants.EVENT_PROGRESS_UPLOAD,\n          normalizeBrowserProgressEvent(event)\n        );\n      };\n    }\n\n    xhr.onerror = function(error) {\n      reject(error);\n    };\n\n    xhr.onabort = function() {\n      var mapiError = new MapiError({\n        request: request,\n        type: constants.ERROR_REQUEST_ABORTED\n      });\n      reject(mapiError);\n    };\n\n    xhr.onload = function() {\n      delete requestsUnderway[request.id];\n      if (xhr.status < 200 || xhr.status >= 400) {\n        var mapiError = new MapiError({\n          request: request,\n          body: xhr.response,\n          statusCode: xhr.status\n        });\n        reject(mapiError);\n        return;\n      }\n      resolve(xhr);\n    };\n\n    var body = request.body;\n\n    // matching service needs to send a www-form-urlencoded request\n    if (typeof body === 'string') {\n      xhr.send(body);\n    } else if (body) {\n      xhr.send(JSON.stringify(body));\n    } else if (file) {\n      xhr.send(file);\n    } else {\n      xhr.send();\n    }\n\n    requestsUnderway[request.id] = xhr;\n  }).then(function(xhr) {\n    return createResponse(request, xhr);\n  });\n}\n\n// The accessToken argument gives this function flexibility\n// for Mapbox's internal client.\nfunction createRequestXhr(request, accessToken) {\n  var url = request.url(accessToken);\n  var xhr = new window.XMLHttpRequest();\n  xhr.open(request.method, url);\n  Object.keys(request.headers).forEach(function(key) {\n    xhr.setRequestHeader(key, request.headers[key]);\n  });\n  return xhr;\n}\n\nfunction browserSend(request) {\n  return Promise.resolve().then(function() {\n    var xhr = createRequestXhr(request, request.client.accessToken);\n    return sendRequestXhr(request, xhr);\n  });\n}\n\nmodule.exports = {\n  browserAbort: browserAbort,\n  sendRequestXhr: sendRequestXhr,\n  browserSend: browserSend,\n  createRequestXhr: createRequestXhr\n};\n","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atk’s excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters…\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// …convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","'use strict';\n\nvar base64 = require('base-64');\n\nvar tokenCache = {};\n\nfunction parseToken(token) {\n  if (tokenCache[token]) {\n    return tokenCache[token];\n  }\n\n  var parts = token.split('.');\n  var usage = parts[0];\n  var rawPayload = parts[1];\n  if (!rawPayload) {\n    throw new Error('Invalid token');\n  }\n\n  var parsedPayload = parsePaylod(rawPayload);\n\n  var result = {\n    usage: usage,\n    user: parsedPayload.u\n  };\n  if (has(parsedPayload, 'a')) result.authorization = parsedPayload.a;\n  if (has(parsedPayload, 'exp')) result.expires = parsedPayload.exp * 1000;\n  if (has(parsedPayload, 'iat')) result.created = parsedPayload.iat * 1000;\n  if (has(parsedPayload, 'scopes')) result.scopes = parsedPayload.scopes;\n  if (has(parsedPayload, 'client')) result.client = parsedPayload.client;\n  if (has(parsedPayload, 'll')) result.lastLogin = parsedPayload.ll;\n  if (has(parsedPayload, 'iu')) result.impersonator = parsedPayload.iu;\n\n  tokenCache[token] = result;\n  return result;\n}\n\nfunction parsePaylod(rawPayload) {\n  try {\n    return JSON.parse(base64.decode(rawPayload));\n  } catch (parseError) {\n    throw new Error('Invalid token');\n  }\n}\n\nfunction has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nmodule.exports = parseToken;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\n\n// Encode each item of an array individually. The comma\n// delimiters should not themselves be encoded.\nfunction encodeArray(arrayValue) {\n  return arrayValue.map(encodeURIComponent).join(',');\n}\n\nfunction encodeValue(value) {\n  if (Array.isArray(value)) {\n    return encodeArray(value);\n  }\n  return encodeURIComponent(String(value));\n}\n\n/**\n * Append a query parameter to a URL.\n *\n * @param {string} url\n * @param {string} key\n * @param {string|number|boolean|Array<*>>} [value] - Provide an array\n *   if the value is a list and commas between values need to be\n *   preserved, unencoded.\n * @returns {string} - Modified URL.\n */\nfunction appendQueryParam(url, key, value) {\n  if (value === false || value === null) {\n    return url;\n  }\n  var punctuation = /\\?/.test(url) ? '&' : '?';\n  var query = encodeURIComponent(key);\n  if (value !== undefined && value !== '' && value !== true) {\n    query += '=' + encodeValue(value);\n  }\n  return '' + url + punctuation + query;\n}\n\n/**\n * Derive a query string from an object and append it\n * to a URL.\n *\n * @param {string} url\n * @param {Object} [queryObject] - Values should be primitives.\n * @returns {string} - Modified URL.\n */\nfunction appendQueryObject(url, queryObject) {\n  if (!queryObject) {\n    return url;\n  }\n\n  var result = url;\n  Object.keys(queryObject).forEach(function(key) {\n    var value = queryObject[key];\n    if (value === undefined) {\n      return;\n    }\n    if (Array.isArray(value)) {\n      value = value\n        .filter(function(v) {\n          return !!v;\n        })\n        .join(',');\n    }\n    result = appendQueryParam(result, key, value);\n  });\n  return result;\n}\n\n/**\n * Prepend an origin to a URL. If the URL already has an\n * origin, do nothing.\n *\n * @param {string} url\n * @param {string} origin\n * @returns {string} - Modified URL.\n */\nfunction prependOrigin(url, origin) {\n  if (!origin) {\n    return url;\n  }\n\n  if (url.slice(0, 4) === 'http') {\n    return url;\n  }\n\n  var delimiter = url[0] === '/' ? '' : '/';\n  return '' + origin.replace(/\\/$/, '') + delimiter + url;\n}\n\n/**\n * Interpolate values into a route with express-style,\n * colon-prefixed route parameters.\n *\n * @param {string} route\n * @param {Object} [params] - Values should be primitives\n *   or arrays of primitives. Provide an array if the value\n *   is a list and commas between values need to be\n *   preserved, unencoded.\n * @returns {string} - Modified URL.\n */\nfunction interpolateRouteParams(route, params) {\n  if (!params) {\n    return route;\n  }\n  return route.replace(/\\/:([a-zA-Z0-9]+)/g, function(_, paramId) {\n    var value = params[paramId];\n    if (value === undefined) {\n      throw new Error('Unspecified route parameter ' + paramId);\n    }\n    var preppedValue = encodeValue(value);\n    return '/' + preppedValue;\n  });\n}\n\nmodule.exports = {\n  appendQueryObject: appendQueryObject,\n  appendQueryParam: appendQueryParam,\n  prependOrigin: prependOrigin,\n  interpolateRouteParams: interpolateRouteParams\n};\n","'use strict';\n\nvar parseToken = require('@mapbox/parse-mapbox-token');\nvar xtend = require('xtend');\nvar EventEmitter = require('eventemitter3');\nvar urlUtils = require('../helpers/url-utils');\nvar constants = require('../constants');\n\nvar requestId = 1;\n\n/**\n * A Mapbox API request.\n *\n * Note that creating a `MapiRequest` does *not* send the request automatically.\n * Use the request's `send` method to send it off and get a `Promise`.\n *\n * The `emitter` property is an `EventEmitter` that emits the following events:\n *\n * - `'response'` - Listeners will be called with a `MapiResponse`.\n * - `'error'` - Listeners will be called with a `MapiError`.\n * - `'downloadProgress'` - Listeners will be called with `ProgressEvents`.\n * - `'uploadProgress'` - Listeners will be called with `ProgressEvents`.\n *   Upload events are only available when the request includes a file.\n *\n * @class MapiRequest\n * @property {EventEmitter} emitter - An event emitter. See above.\n * @property {MapiClient} client - This request's `MapiClient`.\n * @property {MapiResponse|null} response - If this request has been sent and received\n *   a response, the response is available on this property.\n * @property {MapiError|Error|null} error - If this request has been sent and\n *   received an error in response, the error is available on this property.\n * @property {boolean} aborted - If the request has been aborted\n *   (via [`abort`](#abort)), this property will be `true`.\n * @property {boolean} sent - If the request has been sent, this property will\n *   be `true`. You cannot send the same request twice, so if you need to create\n *   a new request that is the equivalent of an existing one, use\n *   [`clone`](#clone).\n * @property {string} path - The request's path, including colon-prefixed route\n *   parameters.\n * @property {string} origin - The request's origin.\n * @property {string} method - The request's HTTP method.\n * @property {Object} query - A query object, which will be transformed into\n *   a URL query string.\n * @property {Object} params - A route parameters object, whose values will\n *   be interpolated the path.\n * @property {Object} headers - The request's headers.\n * @property {Object|string|null} body - Data to send with the request.\n *   If the request has a body, it will also be sent with the header\n *   `'Content-Type: application/json'`.\n * @property {Blob|ArrayBuffer|string|ReadStream} file - A file to\n *   send with the request. The browser client accepts Blobs and ArrayBuffers;\n *   the Node client accepts strings (filepaths) and ReadStreams.\n */\n\n/**\n * @ignore\n * @param {MapiClient} client\n * @param {Object} options\n * @param {string} options.method\n * @param {string} options.path\n * @param {Object} [options.query={}]\n * @param {Object} [options.params={}]\n * @param {string} [options.origin]\n * @param {Object} [options.headers]\n * @param {Object} [options.body=null]\n * @param {Blob|ArrayBuffer|string|ReadStream} [options.file=null]\n */\nfunction MapiRequest(client, options) {\n  if (!client) {\n    throw new Error('MapiRequest requires a client');\n  }\n  if (!options || !options.path || !options.method) {\n    throw new Error(\n      'MapiRequest requires an options object with path and method properties'\n    );\n  }\n\n  var defaultHeaders = {};\n  if (options.body) {\n    defaultHeaders['content-type'] = 'application/json';\n  }\n\n  var headersWithDefaults = xtend(defaultHeaders, options.headers);\n\n  // Disallows duplicate header names of mixed case,\n  // e.g. Content-Type and content-type.\n  var headers = Object.keys(headersWithDefaults).reduce(function(memo, name) {\n    memo[name.toLowerCase()] = headersWithDefaults[name];\n    return memo;\n  }, {});\n\n  this.id = requestId++;\n  this._options = options;\n\n  this.emitter = new EventEmitter();\n  this.client = client;\n  this.response = null;\n  this.error = null;\n  this.sent = false;\n  this.aborted = false;\n  this.path = options.path;\n  this.method = options.method;\n  this.origin = options.origin || client.origin;\n  this.query = options.query || {};\n  this.params = options.params || {};\n  this.body = options.body || null;\n  this.file = options.file || null;\n  this.headers = headers;\n}\n\n/**\n * Get the URL of the request.\n *\n * @param {string} [accessToken] - By default, the access token of the request's\n *   client is used.\n * @return {string}\n */\nMapiRequest.prototype.url = function url(accessToken) {\n  var url = urlUtils.prependOrigin(this.path, this.origin);\n  url = urlUtils.appendQueryObject(url, this.query);\n  var routeParams = this.params;\n  if (accessToken) {\n    url = urlUtils.appendQueryParam(url, 'access_token', accessToken);\n    var accessTokenOwnerId = parseToken(accessToken).user;\n    routeParams = xtend({ ownerId: accessTokenOwnerId }, routeParams);\n  }\n  url = urlUtils.interpolateRouteParams(url, routeParams);\n  return url;\n};\n\n/**\n * Send the request. Returns a Promise that resolves with a `MapiResponse`.\n * You probably want to use `response.body`.\n *\n * `send` only retrieves the first page of paginated results. You can get\n * the next page by using the `MapiResponse`'s [`nextPage`](#nextpage)\n * function, or iterate through all pages using [`eachPage`](#eachpage)\n * instead of `send`.\n *\n * @returns {Promise<MapiResponse>}\n */\nMapiRequest.prototype.send = function send() {\n  var self = this;\n\n  if (self.sent) {\n    throw new Error(\n      'This request has already been sent. Check the response and error properties. Create a new request with clone().'\n    );\n  }\n  self.sent = true;\n\n  return self.client.sendRequest(self).then(\n    function(response) {\n      self.response = response;\n      self.emitter.emit(constants.EVENT_RESPONSE, response);\n      return response;\n    },\n    function(error) {\n      self.error = error;\n      self.emitter.emit(constants.EVENT_ERROR, error);\n      throw error;\n    }\n  );\n};\n\n/**\n * Abort the request.\n *\n * Any pending `Promise` returned by [`send`](#send) will be rejected with\n * an error with `type: 'RequestAbortedError'`. If you've created a request\n * that might be aborted, you need to catch and handle such errors.\n *\n * This method will also abort any requests created while fetching subsequent\n * pages via [`eachPage`](#eachpage).\n *\n * If the request has not been sent or has already been aborted, nothing\n * will happen.\n */\nMapiRequest.prototype.abort = function abort() {\n  if (this._nextPageRequest) {\n    this._nextPageRequest.abort();\n    delete this._nextPageRequest;\n  }\n\n  if (this.response || this.error || this.aborted) return;\n\n  this.aborted = true;\n  this.client.abortRequest(this);\n};\n\n/**\n * Invoke a callback for each page of a paginated API response.\n *\n * The callback should have the following signature:\n *\n * ```js\n * (\n *   error: MapiError,\n *   response: MapiResponse,\n *   next: () => void\n * ) => void\n * ```\n *\n * **The next page will not be fetched until you've invoked the\n * `next` callback**, indicating that you're ready for it.\n *\n * @param {Function} callback\n */\nMapiRequest.prototype.eachPage = function eachPage(callback) {\n  var self = this;\n\n  function handleResponse(response) {\n    function getNextPage() {\n      delete self._nextPageRequest;\n      var nextPageRequest = response.nextPage();\n      if (nextPageRequest) {\n        self._nextPageRequest = nextPageRequest;\n        getPage(nextPageRequest);\n      }\n    }\n    callback(null, response, getNextPage);\n  }\n\n  function handleError(error) {\n    callback(error, null, function() {});\n  }\n\n  function getPage(request) {\n    request.send().then(handleResponse, handleError);\n  }\n  getPage(this);\n};\n\n/**\n * Clone this request.\n *\n * Each request can only be sent *once*. So if you'd like to send the\n * same request again, clone it and send away.\n *\n * @returns {MapiRequest} - A new `MapiRequest` configured just like this one.\n */\nMapiRequest.prototype.clone = function clone() {\n  return this._extend();\n};\n\n/**\n * @ignore\n */\nMapiRequest.prototype._extend = function _extend(options) {\n  var extendedOptions = xtend(this._options, options);\n  return new MapiRequest(this.client, extendedOptions);\n};\n\nmodule.exports = MapiRequest;\n","'use strict';\n\nvar parseToken = require('@mapbox/parse-mapbox-token');\nvar MapiRequest = require('./mapi-request');\nvar constants = require('../constants');\n\n/**\n * A low-level Mapbox API client. Use it to create service clients\n * that share the same configuration.\n *\n * Services and `MapiRequest`s use the underlying `MapiClient` to\n * determine how to create, send, and abort requests in a way\n * that is appropriate to the configuration and environment\n * (Node or the browser).\n *\n * @class MapiClient\n * @property {string} accessToken - The Mapbox access token assigned\n *   to this client.\n * @property {string} [origin] - The origin\n *   to use for API requests. Defaults to https://api.mapbox.com.\n */\n\nfunction MapiClient(options) {\n  if (!options || !options.accessToken) {\n    throw new Error('Cannot create a client without an access token');\n  }\n  // Try parsing the access token to determine right away if it's valid.\n  parseToken(options.accessToken);\n\n  this.accessToken = options.accessToken;\n  this.origin = options.origin || constants.API_ORIGIN;\n}\n\nMapiClient.prototype.createRequest = function createRequest(requestOptions) {\n  return new MapiRequest(this, requestOptions);\n};\n\nmodule.exports = MapiClient;\n","'use strict';\n\nvar browser = require('./browser-layer');\nvar MapiClient = require('../classes/mapi-client');\n\nfunction BrowserClient(options) {\n  MapiClient.call(this, options);\n}\nBrowserClient.prototype = Object.create(MapiClient.prototype);\nBrowserClient.prototype.constructor = BrowserClient;\n\nBrowserClient.prototype.sendRequest = browser.browserSend;\nBrowserClient.prototype.abortRequest = browser.browserAbort;\n\n/**\n * Create a client for the browser.\n *\n * @param {Object} options\n * @param {string} options.accessToken\n * @param {string} [options.origin]\n * @returns {MapiClient}\n */\nfunction createBrowserClient(options) {\n  return new BrowserClient(options);\n}\n\nmodule.exports = createBrowserClient;\n","'use strict';\n\nfunction parseSingleHeader(raw) {\n  var boundary = raw.indexOf(':');\n  var name = raw\n    .substring(0, boundary)\n    .trim()\n    .toLowerCase();\n  var value = raw.substring(boundary + 1).trim();\n  return {\n    name: name,\n    value: value\n  };\n}\n\n/**\n * Parse raw headers into an object with lowercase properties.\n * Does not fully parse headings into more complete data structure,\n * as larger libraries might do. Also does not deal with duplicate\n * headers because Node doesn't seem to deal with those well, so\n * we shouldn't let the browser either, for consistency.\n *\n * @param {string} raw\n * @returns {Object}\n */\nfunction parseHeaders(raw) {\n  var headers = {};\n  if (!raw) {\n    return headers;\n  }\n\n  raw\n    .trim()\n    .split(/[\\r|\\n]+/)\n    .forEach(function(rawHeader) {\n      var parsed = parseSingleHeader(rawHeader);\n      headers[parsed.name] = parsed.value;\n    });\n\n  return headers;\n}\n\nmodule.exports = parseHeaders;\n","'use strict';\n\nvar client = require('./lib/client');\n\nmodule.exports = client;\n","'use strict';\nvar toString = Object.prototype.toString;\n\nmodule.exports = function (x) {\n\tvar prototype;\n\treturn toString.call(x) === '[object Object]' && (prototype = Object.getPrototypeOf(x), prototype === null || prototype === Object.getPrototypeOf({}));\n};\n","'use strict';\n/**\n * Validators are functions which assert certain type.\n * They can return a string which can then be used\n * to display a helpful error message.\n * They can also return a function for a custom error message.\n */\nvar isPlainObject = require('is-plain-obj');\nvar xtend = require('xtend');\n\nvar DEFAULT_ERROR_PATH = 'value';\nvar NEWLINE_INDENT = '\\n  ';\n\nvar v = {};\n\n/**\n * Runners\n *\n * Take root validators and run assertion\n */\nv.assert = function(rootValidator, options) {\n  options = options || {};\n  return function(value) {\n    var message = validate(rootValidator, value);\n    // all good\n    if (!message) {\n      return;\n    }\n\n    var errorMessage = processMessage(message, options);\n\n    if (options.apiName) {\n      errorMessage = options.apiName + ': ' + errorMessage;\n    }\n\n    throw new Error(errorMessage);\n  };\n};\n\n/**\n * Higher Order Validators\n *\n * validators which take other validators as input\n * and output a new validator\n */\nv.shape = function shape(validatorObj) {\n  var validators = objectEntries(validatorObj);\n  return function shapeValidator(value) {\n    var validationResult = validate(v.plainObject, value);\n\n    if (validationResult) {\n      return validationResult;\n    }\n\n    var key, validator;\n    var errorMessages = [];\n\n    for (var i = 0; i < validators.length; i++) {\n      key = validators[i].key;\n      validator = validators[i].value;\n      validationResult = validate(validator, value[key]);\n\n      if (validationResult) {\n        // return [key].concat(validationResult);\n        errorMessages.push([key].concat(validationResult));\n      }\n    }\n\n    if (errorMessages.length < 2) {\n      return errorMessages[0];\n    }\n\n    // enumerate all the error messages\n    return function(options) {\n      errorMessages = errorMessages.map(function(message) {\n        var key = message[0];\n        var renderedMessage = processMessage(message, options)\n          .split('\\n')\n          .join(NEWLINE_INDENT); // indents any inner nesting\n        return '- ' + key + ': ' + renderedMessage;\n      });\n\n      var objectId = options.path.join('.');\n      var ofPhrase = objectId === DEFAULT_ERROR_PATH ? '' : ' of ' + objectId;\n\n      return (\n        'The following properties' +\n        ofPhrase +\n        ' have invalid values:' +\n        NEWLINE_INDENT +\n        errorMessages.join(NEWLINE_INDENT)\n      );\n    };\n  };\n};\n\nv.strictShape = function strictShape(validatorObj) {\n  var shapeValidator = v.shape(validatorObj);\n  return function strictShapeValidator(value) {\n    var shapeResult = shapeValidator(value);\n    if (shapeResult) {\n      return shapeResult;\n    }\n\n    var invalidKeys = Object.keys(value).reduce(function(memo, valueKey) {\n      if (validatorObj[valueKey] === undefined) {\n        memo.push(valueKey);\n      }\n      return memo;\n    }, []);\n\n    if (invalidKeys.length !== 0) {\n      return function() {\n        return 'The following keys are invalid: ' + invalidKeys.join(', ');\n      };\n    }\n  };\n};\n\nv.arrayOf = function arrayOf(validator) {\n  return createArrayValidator(validator);\n};\n\nv.tuple = function tuple() {\n  var validators = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  return createArrayValidator(validators);\n};\n\n// Currently array validation fails when the first invalid item is found.\nfunction createArrayValidator(validators) {\n  var validatingTuple = Array.isArray(validators);\n  var getValidator = function(index) {\n    if (validatingTuple) {\n      return validators[index];\n    }\n    return validators;\n  };\n\n  return function arrayValidator(value) {\n    var validationResult = validate(v.plainArray, value);\n    if (validationResult) {\n      return validationResult;\n    }\n\n    if (validatingTuple && value.length !== validators.length) {\n      return 'an array with ' + validators.length + ' items';\n    }\n\n    for (var i = 0; i < value.length; i++) {\n      validationResult = validate(getValidator(i), value[i]);\n      if (validationResult) {\n        return [i].concat(validationResult);\n      }\n    }\n  };\n}\n\nv.required = function required(validator) {\n  function requiredValidator(value) {\n    if (value == null) {\n      return function(options) {\n        return formatErrorMessage(\n          options,\n          isArrayCulprit(options.path)\n            ? 'cannot be undefined/null.'\n            : 'is required.'\n        );\n      };\n    }\n    return validator.apply(this, arguments);\n  }\n  requiredValidator.__required = true;\n\n  return requiredValidator;\n};\n\nv.oneOfType = function oneOfType() {\n  var validators = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  return function oneOfTypeValidator(value) {\n    var messages = validators\n      .map(function(validator) {\n        return validate(validator, value);\n      })\n      .filter(Boolean);\n\n    // If we don't have as many messages as no. of validators,\n    // then at least one validator was ok with the value.\n    if (messages.length !== validators.length) {\n      return;\n    }\n\n    // check primitive type\n    if (\n      messages.every(function(message) {\n        return message.length === 1 && typeof message[0] === 'string';\n      })\n    ) {\n      return orList(\n        messages.map(function(m) {\n          return m[0];\n        })\n      );\n    }\n\n    // Complex oneOfTypes like\n    // `v.oneOftypes(v.shape({name: v.string})`, `v.shape({name: v.number}))`\n    // are complex ¯\\_(ツ)_/¯. For the current scope only returning the longest message.\n    return messages.reduce(function(max, arr) {\n      return arr.length > max.length ? arr : max;\n    });\n  };\n};\n\n/**\n * Meta Validators\n * which take options as argument (not validators)\n * and return a new primitive validator\n */\nv.equal = function equal(compareWith) {\n  return function equalValidator(value) {\n    if (value !== compareWith) {\n      return JSON.stringify(compareWith);\n    }\n  };\n};\n\nv.oneOf = function oneOf() {\n  var options = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  var validators = options.map(function(value) {\n    return v.equal(value);\n  });\n\n  return v.oneOfType.apply(this, validators);\n};\n\nv.range = function range(compareWith) {\n  var min = compareWith[0];\n  var max = compareWith[1];\n  return function rangeValidator(value) {\n    var validationResult = validate(v.number, value);\n\n    if (validationResult || value < min || value > max) {\n      return 'number between ' + min + ' & ' + max + ' (inclusive)';\n    }\n  };\n};\n\n/**\n * Primitive validators\n *\n * simple validators which return a string or undefined\n */\nv.any = function any() {\n  return;\n};\n\nv.boolean = function boolean(value) {\n  if (typeof value !== 'boolean') {\n    return 'boolean';\n  }\n};\n\nv.number = function number(value) {\n  if (typeof value !== 'number') {\n    return 'number';\n  }\n};\n\nv.plainArray = function plainArray(value) {\n  if (!Array.isArray(value)) {\n    return 'array';\n  }\n};\n\nv.plainObject = function plainObject(value) {\n  if (!isPlainObject(value)) {\n    return 'object';\n  }\n};\n\nv.string = function string(value) {\n  if (typeof value !== 'string') {\n    return 'string';\n  }\n};\n\nv.func = function func(value) {\n  if (typeof value !== 'function') {\n    return 'function';\n  }\n};\n\nfunction validate(validator, value) {\n  // assertions are optional by default unless wrapped in v.require\n  if (value == null && !validator.hasOwnProperty('__required')) {\n    return;\n  }\n\n  var result = validator(value);\n\n  if (result) {\n    return Array.isArray(result) ? result : [result];\n  }\n}\n\nfunction processMessage(message, options) {\n  // message array follows the convention\n  // [...path, result]\n  // path is an array of object keys / array indices\n  // result is output of the validator\n  var len = message.length;\n\n  var result = message[len - 1];\n  var path = message.slice(0, len - 1);\n\n  if (path.length === 0) {\n    path = [DEFAULT_ERROR_PATH];\n  }\n  options = xtend(options, { path: path });\n\n  return typeof result === 'function'\n    ? result(options) // allows customization of result\n    : formatErrorMessage(options, prettifyResult(result));\n}\n\nfunction orList(list) {\n  if (list.length < 2) {\n    return list[0];\n  }\n  if (list.length === 2) {\n    return list.join(' or ');\n  }\n  return list.slice(0, -1).join(', ') + ', or ' + list.slice(-1);\n}\n\nfunction prettifyResult(result) {\n  return 'must be ' + addArticle(result) + '.';\n}\n\nfunction addArticle(nounPhrase) {\n  if (/^an? /.test(nounPhrase)) {\n    return nounPhrase;\n  }\n  if (/^[aeiou]/i.test(nounPhrase)) {\n    return 'an ' + nounPhrase;\n  }\n  if (/^[a-z]/i.test(nounPhrase)) {\n    return 'a ' + nounPhrase;\n  }\n  return nounPhrase;\n}\n\nfunction formatErrorMessage(options, prettyResult) {\n  var arrayCulprit = isArrayCulprit(options.path);\n  var output = options.path.join('.') + ' ' + prettyResult;\n  var prepend = arrayCulprit ? 'Item at position ' : '';\n\n  return prepend + output;\n}\n\nfunction isArrayCulprit(path) {\n  return typeof path[path.length - 1] == 'number' || typeof path[0] == 'number';\n}\n\nfunction objectEntries(obj) {\n  return Object.keys(obj || {}).map(function(key) {\n    return { key: key, value: obj[key] };\n  });\n}\n\nv.validate = validate;\nv.processMessage = processMessage;\n\nmodule.exports = v;\n","'use strict';\n\nvar xtend = require('xtend');\nvar v = require('@mapbox/fusspot');\n\nfunction file(value) {\n  // If we're in a browser so Blob is available, the file must be that.\n  // In Node, however, it could be a filepath or a pipeable (Readable) stream.\n  if (typeof window !== 'undefined') {\n    if (value instanceof global.Blob || value instanceof global.ArrayBuffer) {\n      return;\n    }\n    return 'Blob or ArrayBuffer';\n  }\n  if (typeof value === 'string' || value.pipe !== undefined) {\n    return;\n  }\n  return 'Filename or Readable stream';\n}\n\nfunction assertShape(validatorObj, apiName) {\n  return v.assert(v.strictShape(validatorObj), apiName);\n}\n\nfunction date(value) {\n  var msg = 'date';\n  if (typeof value === 'boolean') {\n    return msg;\n  }\n  try {\n    var date = new Date(value);\n    if (date.getTime && isNaN(date.getTime())) {\n      return msg;\n    }\n  } catch (e) {\n    return msg;\n  }\n}\n\nfunction coordinates(value) {\n  return v.tuple(v.number, v.number)(value);\n}\n\nmodule.exports = xtend(v, {\n  file: file,\n  date: date,\n  coordinates: coordinates,\n  assertShape: assertShape\n});\n","'use strict';\n\n/**\n * Create a new object by picking properties off an existing object.\n * The second param can be overloaded as a callback for\n * more fine grained picking of properties.\n * @param {Object} source\n * @param {Array<string>|function(string, Object):boolean} keys\n * @returns {Object}\n */\nfunction pick(source, keys) {\n  var filter = function(key, val) {\n    return keys.indexOf(key) !== -1 && val !== undefined;\n  };\n\n  if (typeof keys === 'function') {\n    filter = keys;\n  }\n\n  return Object.keys(source)\n    .filter(function(key) {\n      return filter(key, source[key]);\n    })\n    .reduce(function(result, key) {\n      result[key] = source[key];\n      return result;\n    }, {});\n}\n\nmodule.exports = pick;\n","'use strict';\n\nvar objectMap = require('./object-map');\n\n/**\n * Stringify all the boolean values in an object, so true becomes \"true\".\n *\n * @param {Object} obj\n * @returns {Object}\n */\nfunction stringifyBoolean(obj) {\n  return objectMap(obj, function(_, value) {\n    return typeof value === 'boolean' ? JSON.stringify(value) : value;\n  });\n}\n\nmodule.exports = stringifyBoolean;\n","'use strict';\n\nfunction objectMap(obj, cb) {\n  return Object.keys(obj).reduce(function(result, key) {\n    result[key] = cb(key, obj[key]);\n    return result;\n  }, {});\n}\n\nmodule.exports = objectMap;\n","'use strict';\n\nvar xtend = require('xtend');\nvar v = require('./service-helpers/validator');\nvar pick = require('./service-helpers/pick');\nvar stringifyBooleans = require('./service-helpers/stringify-booleans');\nvar createServiceFactory = require('./service-helpers/create-service-factory');\n\n/**\n * Geocoding API service.\n *\n * Learn more about this service and its responses in\n * [the HTTP service documentation](https://www.mapbox.com/api-documentation/#geocoding).\n */\nvar Geocoding = {};\n\nvar featureTypes = [\n  'country',\n  'region',\n  'postcode',\n  'district',\n  'place',\n  'locality',\n  'neighborhood',\n  'address',\n  'poi',\n  'poi.landmark'\n];\n\n/**\n * Search for a place.\n *\n * See the [public documentation](https://www.mapbox.com/api-documentation/#search-for-places).\n *\n * @param {Object} config\n * @param {string} config.query - A place name.\n * @param {'mapbox.places'|'mapbox.places-permanent'} [config.mode=\"mapbox.places\"] - Either `mapbox.places` for ephemeral geocoding, or `mapbox.places-permanent` for storing results and batch geocoding.\n * @param {Array<string>} [config.countries] - Limits results to the specified countries.\n *   Each item in the array should be an [ISO 3166 alpha 2 country code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).\n * @param {Coordinates} [config.proximity] - Bias local results based on a provided location.\n * @param {Array<'country'|'region'|'postcode'|'district'|'place'|'locality'|'neighborhood'|'address'|'poi'|'poi.landmark'>} [config.types] - Filter results by feature types.\n * @param {boolean} [config.autocomplete=true] - Return autocomplete results or not.\n * @param {BoundingBox} [config.bbox] - Limit results to a bounding box.\n * @param {number} [config.limit=5] - Limit the number of results returned.\n * @param {Array<string>} [config.language] - Specify the language to use for response text and, for forward geocoding, query result weighting.\n *  Options are [IETF language tags](https://en.wikipedia.org/wiki/IETF_language_tag) comprised of a mandatory\n *  [ISO 639-1 language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) and optionally one or more IETF subtags for country or script.\n * @return {MapiRequest}\n */\nGeocoding.forwardGeocode = function(config) {\n  v.assertShape({\n    query: v.required(v.string),\n    mode: v.oneOf('mapbox.places', 'mapbox.places-permanent'),\n    countries: v.arrayOf(v.string),\n    proximity: v.coordinates,\n    types: v.arrayOf(v.oneOf(featureTypes)),\n    autocomplete: v.boolean,\n    bbox: v.arrayOf(v.number),\n    limit: v.number,\n    language: v.arrayOf(v.string)\n  })(config);\n\n  config.mode = config.mode || 'mapbox.places';\n\n  var query = stringifyBooleans(\n    xtend(\n      { country: config.countries },\n      pick(config, [\n        'proximity',\n        'types',\n        'autocomplete',\n        'bbox',\n        'limit',\n        'language'\n      ])\n    )\n  );\n\n  return this.client.createRequest({\n    method: 'GET',\n    path: '/geocoding/v5/:mode/:query.json',\n    params: pick(config, ['mode', 'query']),\n    query: query\n  });\n};\n\n/**\n * Search for places near coordinates.\n *\n * See the [public documentation](https://www.mapbox.com/api-documentation/#retrieve-places-near-a-location).\n *\n * @param {Object} config\n * @param {Coordinates} config.query - Coordinates at which features will be searched.\n * @param {'mapbox.places'|'mapbox.places-permanent'} [config.mode=\"mapbox.places\"] - Either `mapbox.places` for ephemeral geocoding, or `mapbox.places-permanent` for storing results and batch geocoding.\n * @param {Array<string>} [config.countries] - Limits results to the specified countries.\n *   Each item in the array should be an [ISO 3166 alpha 2 country code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).\n * @param {Array<'country'|'region'|'postcode'|'district'|'place'|'locality'|'neighborhood'|'address'|'poi'|'poi.landmark'>} [config.types] - Filter results by feature types.\n * @param {BoundingBox} [config.bbox] - Limit results to a bounding box.\n * @param {number} [config.limit=1] - Limit the number of results returned. If using this option, you must provide a single item for `types`.\n * @param {Array<string>} [config.language] - Specify the language to use for response text and, for forward geocoding, query result weighting.\n *  Options are [IETF language tags](https://en.wikipedia.org/wiki/IETF_language_tag) comprised of a mandatory\n *  [ISO 639-1 language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) and optionally one or more IETF subtags for country or script.\n * @param {'distance'|'score'} [config.reverseMode='distance'] - Set the factors that are used to sort nearby results.\n * @return {MapiRequest}\n */\nGeocoding.reverseGeocode = function(config) {\n  v.assertShape({\n    query: v.required(v.coordinates),\n    mode: v.oneOf('mapbox.places', 'mapbox.places-permanent'),\n    countries: v.arrayOf(v.string),\n    types: v.arrayOf(v.oneOf(featureTypes)),\n    bbox: v.arrayOf(v.number),\n    limit: v.number,\n    language: v.arrayOf(v.string),\n    reverseMode: v.oneOf('distance', 'score')\n  })(config);\n\n  config.mode = config.mode || 'mapbox.places';\n\n  var query = stringifyBooleans(\n    xtend(\n      { country: config.countries },\n      pick(config, [\n        'country',\n        'types',\n        'bbox',\n        'limit',\n        'language',\n        'reverseMode'\n      ])\n    )\n  );\n\n  return this.client.createRequest({\n    method: 'GET',\n    path: '/geocoding/v5/:mode/:query.json',\n    params: pick(config, ['mode', 'query']),\n    query: query\n  });\n};\n\nmodule.exports = createServiceFactory(Geocoding);\n","'use strict';\n\nvar MapiClient = require('../../lib/classes/mapi-client');\n// This will create the environment-appropriate client.\nvar createClient = require('../../lib/client');\n\nfunction createServiceFactory(ServicePrototype) {\n  return function(clientOrConfig) {\n    var client;\n    if (MapiClient.prototype.isPrototypeOf(clientOrConfig)) {\n      client = clientOrConfig;\n    } else {\n      client = createClient(clientOrConfig);\n    }\n    var service = Object.create(ServicePrototype);\n    service.client = client;\n    return service;\n  };\n}\n\nmodule.exports = createServiceFactory;\n","if (process.env.NODE_ENV !== 'production') {\n  if (typeof self === 'undefined' || (!self.crypto && !self.msCrypto)) {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n      'If you don’t need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\n\nvar crypto = self.crypto || self.msCrypto\n\n/*\n * This alphabet uses a-z A-Z 0-9 _- symbols.\n * Symbols order was changed for better gzip compression.\n */\nvar url = 'Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-'\n\nmodule.exports = function (size) {\n  size = size || 21\n  var id = ''\n  var bytes = crypto.getRandomValues(new Uint8Array(size))\n  while (0 < size--) {\n    id += url[bytes[size] & 63]\n  }\n  return id\n}\n","'use strict';\nvar nanoid = require('nanoid')\n\n/**\n * Construct a new mapbox event client to send interaction events to the mapbox event service\n * @param {Object} options options with which to create the service\n * @param {String} options.accessToken the mapbox access token to make requests\n * @param {Number} [options.flushInterval=1000] the number of ms after which to flush the event queue\n * @param {Number} [options.maxQueueSize=100] the number of events to queue before flushing\n * @private\n */\nfunction MapboxEventManager(options) {\n  this.origin = options.origin || 'https://api.mapbox.com';\n  this.endpoint = 'events/v2';\n  this.access_token = options.accessToken;\n  this.version = '0.2.0'\n  this.sessionID = this.generateSessionID();\n  this.userAgent = this.getUserAgent();\n\n  this.options = options;\n  this.send = this.send.bind(this);\n\n\n  // parse global options to be sent with each request\n  this.countries = (options.countries) ? options.countries.split(\",\") : null;\n  this.types = (options.types) ? options.types.split(\",\") : null;\n  this.bbox = (options.bbox) ? options.bbox : null;\n  this.language = (options.language) ? options.language.split(\",\") : null;\n  this.limit = (options.limit) ? +options.limit : null;\n  this.locale = navigator.language || null;\n  this.enableEventLogging = this.shouldEnableLogging(options);\n  this.eventQueue = new Array();\n  this.flushInterval = options.flushInterval || 1000;\n  this.maxQueueSize = options.maxQueueSize || 100;\n  this.timer = (this.flushInterval) ? setTimeout(this.flush.bind(this), this.flushInterval) : null;\n  // keep some state to deduplicate requests if necessary\n  this.lastSentInput = \"\";\n  this.lastSentIndex = 0;\n}\n\nMapboxEventManager.prototype = {\n  /**\n     * Send a search.select event to the mapbox events service\n     * This event marks the array index of the item selected by the user out of the array of possible options\n     * @private\n     * @param {Object} selected the geojson feature selected by the user\n     * @param {Object} geocoder a mapbox-gl-geocoder instance\n     * @returns {Promise}\n     */\n  select: function(selected, geocoder){\n    var resultIndex = this.getSelectedIndex(selected, geocoder);\n    var payload = this.getEventPayload('search.select', geocoder);\n    payload.resultIndex = resultIndex;\n    payload.resultPlaceName  = selected.place_name;\n    payload.resultId = selected.id;\n    if ((resultIndex === this.lastSentIndex && payload.queryString === this.lastSentInput) || resultIndex == -1) {\n      // don't log duplicate events if the user re-selected the same feature on the same search\n      return;\n    }\n    this.lastSentIndex = resultIndex;\n    this.lastSentInput = payload.queryString;\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload)\n  },\n\n  /**\n     * Send a search-start event to the mapbox events service\n     * This turnstile event marks when a user starts a new search\n     * @private\n     * @param {Object} geocoder a mapbox-gl-geocoder instance\n     * @returns {Promise}\n     */\n  start: function(geocoder){\n    var payload = this.getEventPayload('search.start', geocoder);\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload);\n  },\n\n  /**\n   * Send a search-keyevent event to the mapbox events service\n   * This event records each keypress in sequence\n   * @private\n   * @param {Object} keyEvent the keydown event to log\n   * @param {Obeject} geocoder a mapbox-gl-geocoder instance\n   * \n   */\n  keyevent: function(keyEvent, geocoder){\n    //pass invalid event\n    if (!keyEvent.key) return;\n    // don't send events for keys that don't change the input\n    // TAB, ESC, LEFT, RIGHT, ENTER, UP, DOWN\n    if (keyEvent.metaKey || [9, 27, 37, 39, 13, 38, 40].indexOf(keyEvent.keyCode) !== -1) return;\n    var payload = this.getEventPayload('search.keystroke', geocoder);\n    payload.lastAction = keyEvent.key;\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload);\n  },\n\n  /**\n   * Send an event to the events service\n   *\n   * The event is skipped if the instance is not enabled to send logging events\n   *\n   * @private\n   * @param {Object} payload the http POST body of the event\n   * @param {Function} [callback] a callback function to invoke when the send has completed\n   * @returns {Promise}\n   */\n  send: function (payload, callback) {\n    if (!this.enableEventLogging) {\n      if (callback) return callback();\n      return;\n    }\n    var options = this.getRequestOptions(payload);\n    this.request(options, function(err){\n      if (err) return this.handleError(err, callback);\n      if (callback) {\n        return callback();\n      }\n    }.bind(this))\n  },\n  /**\n   * Get http request options\n   * @private\n   * @param {*} payload\n   */\n  getRequestOptions: function(payload){\n    if (!Array.isArray(payload)) payload = [payload];\n    var options = {\n      // events must be sent with POST\n      method: \"POST\",\n      host: this.origin,\n      path: this.endpoint +  \"?access_token=\" + this.access_token,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body:JSON.stringify(payload) //events are arrays\n    }\n    return options\n  },\n\n  /**\n   * Get the event payload to send to the events service\n   * Most payload properties are shared across all events\n   * @private\n   * @param {String} event the name of the event to send to the events service. Valid options are 'search.start', 'search.select', 'search.feedback'.\n   * @param {Object} geocoder a mapbox-gl-geocoder instance\n   * @returns {Object} an event payload\n   */\n  getEventPayload: function (event, geocoder) {\n    var proximity;\n    if (!geocoder.options.proximity) proximity = null;\n    else proximity = [geocoder.options.proximity.longitude, geocoder.options.proximity.latitude];\n\n    var zoom = (geocoder._map) ? geocoder._map.getZoom() : null;\n    var payload = {\n      event: event,\n      created: +new Date(),\n      sessionIdentifier: this.sessionID,\n      country: this.countries,\n      userAgent: this.userAgent,\n      language: this.language,\n      bbox: this.bbox,\n      types: this.types,\n      endpoint: 'mapbox.places',\n      // fuzzyMatch: search.fuzzy, //todo  --> add to plugin\n      proximity: proximity,\n      limit: geocoder.options.limit,\n      // routing: search.routing, //todo --> add to plugin\n      mapZoom: zoom,\n      keyboardLocale: this.locale\n    }\n\n    // get the text in the search bar\n    if (event === \"search.select\"){\n      payload.queryString = geocoder.inputString;\n    }else if (event != \"search.select\" && geocoder._inputEl){\n      payload.queryString = geocoder._inputEl.value;\n    }else{\n      payload.queryString = geocoder.inputString;\n    }\n    return payload;\n  },\n\n  /**\n   * Wraps the request function for easier testing\n   * Make an http request and invoke a callback\n   * @private\n   * @param {Object} opts options describing the http request to be made\n   * @param {Function} callback the callback to invoke when the http request is completed\n   */\n  request: function (opts, callback) {\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n      if (this.readyState == 4 ) {\n        if (this.status == 204){\n          //success\n          return callback(null);\n        }else {\n          return callback(this.statusText);\n        }\n      }\n    };\n\n    xhttp.open(opts.method, opts.host + '/' + opts.path, true);\n    for (var header in opts.headers){\n      var headerValue = opts.headers[header];\n      xhttp.setRequestHeader(header, headerValue)\n    }\n    xhttp.send(opts.body);\n  },\n\n  /**\n   * Handle an error that occurred while making a request\n   * @param {Object} err an error instance to log\n   * @private\n   */\n  handleError: function (err, callback) {\n    if (callback) return callback(err);\n  },\n\n  /**\n   * Generate a session ID to be returned with all of the searches made by this geocoder instance\n   * ID is random and cannot be tracked across sessions\n   * @private\n   */\n  generateSessionID: function () {\n    return nanoid();\n  },\n\n  /**\n   * Get a user agent string to send with the request to the events service\n   * @private\n   */\n  getUserAgent: function () {\n    return 'mapbox-gl-geocoder.' + this.version + \".\" + navigator.userAgent;\n  },\n\n  /**\n     * Get the 0-based numeric index of the item that the user selected out of the list of options\n     * @private\n     * @param {Object} selected the geojson feature selected by the user\n     * @param {Object} geocoder a Mapbox-GL-Geocoder instance\n     * @returns {Number} the index of the selected result\n     */\n  getSelectedIndex: function(selected, geocoder){\n    if (!geocoder._typeahead) return;\n    var results = geocoder._typeahead.data;\n    var selectedID = selected.id;\n    var resultIDs = results.map(function (feature) {\n      return feature.id;\n    });\n    var selectedIdx = resultIDs.indexOf(selectedID);\n    return selectedIdx;\n  },\n\n  /**\n     * Check whether events should be logged\n     * Clients using a localGeocoder or an origin other than mapbox should not have events logged\n     * @private\n     */\n  shouldEnableLogging: function(options){\n    if (options.enableEventLogging === false) return false;\n    if (options.origin && options.origin.indexOf('api.mapbox.com') == -1) return false;\n    // hard to make sense of events when a local instance is suplementing results from origin\n    if (options.localGeocoder) return false;\n    // hard to make sense of events when a custom filter is in use\n    if (options.filter) return false;\n    return true;\n  },\n\n  /**\n   * Flush out the event queue by sending events to the events service\n   * @private\n   */\n  flush: function(){\n    if (this.eventQueue.length > 0){\n      this.send(this.eventQueue);\n      this.eventQueue = new Array();\n    }\n    // //reset the timer\n    if (this.timer)  clearTimeout(this.timer);\n    if (this.flushInterval) this.timer = setTimeout(this.flush.bind(this), this.flushInterval)\n  },\n\n  /**\n   * Push event into the pending queue\n   * @param {Object} evt the event to send to the events service\n   * @param {Boolean} forceFlush indicates that the event queue should be flushed after adding this event regardless of size of the queue\n   * @private\n   */\n  push: function(evt, forceFlush){\n    this.eventQueue.push(evt);\n    if (this.eventQueue.length >= this.maxQueueSize || forceFlush){\n      this.flush();\n    }\n  },\n\n  /**\n   * Flush any remaining events from the queue before it is removed\n   * @private\n   */\n  remove: function(){\n    this.flush();\n  }\n}\n\n\n\nmodule.exports = MapboxEventManager;\n","'use strict';\n\n/**\n * Localized values for the placeholder string\n * \n * @private\n */\nvar placeholder = {\n    // list drawn from https://docs.mapbox.com/api/search/#language-coverage\n  'de': 'Suche', // german\n  'it': 'Ricerca', //italian\n  'en': 'Search', // english\n  'nl': 'Zoeken', //dutch\n  'fr': 'Chercher',  //french\n  'ca': 'Cerca', //catalan\n  'he': 'לחפש', //hebrew\n  'ja': 'サーチ',  //japanese\n  'lv': 'Meklēt', //latvian\n  'pt': 'Procurar', //portuguese \n  'sr': 'Претрага', //serbian\n  'zh': '搜索', //chinese-simplified\n  'cs': 'Vyhledávání', //czech\n  'hu': 'Keresés', //hungarian\n  'ka': 'ძიება', // georgian\n  'nb': 'Søke', //norwegian\n  'sk': 'Vyhľadávanie', //slovak\n  'th': 'ค้นหา', //thai\n  'fi': 'Hae',//finnish\n  'is': 'Leita',//icelandic\n  'ko': '수색',//korean\n  'pl':  'Szukaj', //polish\n  'sl': 'Iskanje' //slovenian\n}\n\nmodule.exports = {placeholder: placeholder};","!function(root, name, make) {\r\n  if (typeof module != 'undefined' && module.exports) module.exports = make()\r\n  else root[name] = make()\r\n}(this, 'subtag', function() {\r\n\r\n  var empty = ''\r\n  var pattern = /^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/\r\n\r\n  function match(tag) {\r\n    return tag.match(pattern) || []\r\n  }\r\n\r\n  function split(tag) {\r\n    return match(tag).filter(function(v, i) { return v && i })\r\n  }\r\n\r\n  function api(tag) {\r\n    tag = match(tag)\r\n    return {\r\n      language: tag[1] || empty,\r\n      extlang: tag[2] || empty,\r\n      script: tag[3] || empty,\r\n      region: tag[4] || empty\r\n    }\r\n  }\r\n\r\n  function expose(target, key, value) {\r\n    Object.defineProperty(target, key, {\r\n      value: value,\r\n      enumerable: true\r\n    })\r\n  }\r\n\r\n  function part(position, pattern, type) {\r\n    function method(tag) {\r\n      return match(tag)[position] || empty\r\n    }\r\n    expose(method, 'pattern', pattern)\r\n    expose(api, type, method)\r\n  }\r\n\r\n  part(1, /^[a-zA-Z]{2,3}$/, 'language')\r\n  part(2, /^[a-zA-Z]{3}$/, 'extlang')\r\n  part(3, /^[a-zA-Z]{4}$/, 'script')\r\n  part(4, /^[a-zA-Z]{2}$|^[0-9]{3}$/, 'region')\r\n\r\n  expose(api, 'split', split)\r\n\r\n  return api\r\n});\r\n","'use strict';\n\nvar Typeahead = require('suggestions');\nvar debounce = require('lodash.debounce');\nvar extend = require('xtend');\nvar EventEmitter = require('events').EventEmitter;\nvar exceptions = require('./exceptions');\nvar MapboxClient = require('@mapbox/mapbox-sdk');\nvar mbxGeocoder = require('@mapbox/mapbox-sdk/services/geocoding');\nvar MapboxEventManager = require('./events');\nvar localization = require('./localization');\nvar subtag = require('subtag');\n\n/**\n * A geocoder component using Mapbox Geocoding API\n * @class MapboxGeocoder\n * @param {Object} options\n * @param {String} options.accessToken Required.\n * @param {String} options.origin Use to set a custom API origin. Defaults to https://api.mapbox.com.\n * @param {Object} [options.mapboxgl] A [mapbox-gl](https://github.com/mapbox/mapbox-gl-js) instance to use when creating [Markers](https://docs.mapbox.com/mapbox-gl-js/api/#marker). Required if `options.marker` is true.\n * @param {Number} [options.zoom=16] On geocoded result what zoom level should the map animate to when a `bbox` isn't found in the response. If a `bbox` is found the map will fit to the `bbox`.\n * @param {Boolean|Object} [options.flyTo] If false, animating the map to a selected result is disabled. If true, animating the map will use the default animation parameters. If an object, the object will be passed to the map method to specify a custom animation when a result is selected.\n * @param {String} [options.placeholder=\"Search\"] Override the default placeholder attribute value.\n * @param {Object} [options.proximity] a proximity argument: this is\n * a geographical point given as an object with latitude and longitude\n * properties. Search results closer to this point will be given\n * higher priority.\n * @param {Boolean} [options.trackProximity=true] If true, the geocoder proximity will automatically update based on the map view.\n * @param {Boolean} [options.collapsed=false] If true, the geocoder control will collapse until hovered or in focus.\n * @param {Boolean} [options.clearAndBlurOnEsc=false] If true, the geocoder control will clear it's contents and blur when user presses the escape key.\n * @param {Boolean} [options.clearOnBlur=false] If true, the geocoder control will clear its value when the input blurs.\n * @param {Array} [options.bbox] a bounding box argument: this is\n * a bounding box given as an array in the format [minX, minY, maxX, maxY].\n * Search results will be limited to the bounding box.\n * @param {string} [options.countries] a comma separated list of country codes to\n * limit results to specified country or countries.\n * @param {string} [options.types] a comma seperated list of types that filter\n * results to match those specified. See https://docs.mapbox.com/api/search/#data-types\n * for available types.\n * If reverseGeocode is enabled, you should specify one type. If you configure more than one type, the first type will be used.\n * @param {Number} [options.minLength=2] Minimum number of characters to enter before results are shown.\n * @param {Number} [options.limit=5] Maximum number of results to show.\n * @param {string} [options.language] Specify the language to use for response text and query result weighting. Options are IETF language tags comprised of a mandatory ISO 639-1 language code and optionally one or more IETF subtags for country or script. More than one value can also be specified, separated by commas.\n * @param {Function} [options.filter] A function which accepts a Feature in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format to filter out results from the Geocoding API response before they are included in the suggestions list. Return `true` to keep the item, `false` otherwise.\n * @param {Function} [options.localGeocoder] A function accepting the query string which performs local geocoding to supplement results from the Mapbox Geocoding API. Expected to return an Array of GeoJSON Features in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format.\n * @param {'distance'|'score'} [options.reverseMode='distance'] - Set the factors that are used to sort nearby results.\n * @param {boolean} [options.reverseGeocode] Enable reverse geocoding. Defaults to false. Expects coordinates to be lat, lon.\n * @param {Boolean} [options.enableEventLogging=true] Allow Mapbox to collect anonymous usage statistics from the plugin\n * @param {Boolean|Object} [options.marker=true]  If `true`, a [Marker](https://docs.mapbox.com/mapbox-gl-js/api/#marker) will be added to the map at the location of the user-selected result using a default set of Marker options.  If the value is an object, the marker will be constructed using these options. If `false`, no marker will be added to the map. Requires that `options.mapboxgl` also be set.\n * @param {Function} [options.render] A function that specifies how the results should be rendered in the dropdown menu. Accepts a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object  as input and return a string. Any html in the returned string will be rendered.\n * @param {Function} [options.getItemValue] A function that specifies how the selected result should be rendered in the search bar. This function should accept a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object  as input and return a string. HTML tags in the output string will not be rendered.\n * @example\n * var geocoder = new MapboxGeocoder({ accessToken: mapboxgl.accessToken });\n * map.addControl(geocoder);\n * @return {MapboxGeocoder} `this`\n *\n */\n\nfunction MapboxGeocoder(options) {\n  this._eventEmitter = new EventEmitter();\n  this.options = extend({}, this.options, options);\n  this.inputString = '';\n  this.fresh = true;\n  this.lastSelected = null;\n}\n\nMapboxGeocoder.prototype = {\n  options: {\n    zoom: 16,\n    flyTo: true,\n    trackProximity: true,\n    minLength: 2,\n    reverseGeocode: false,\n    limit: 5,\n    origin: 'https://api.mapbox.com',\n    enableEventLogging: true,\n    marker: true,\n    mapboxgl: null,\n    collapsed: false,\n    clearAndBlurOnEsc: false,\n    clearOnBlur: false,\n    getItemValue: function(item) {\n      return item.place_name\n    },\n    render: function(item) {\n      var placeName = item.place_name.split(',');\n      return '<div class=\"mapboxgl-ctrl-geocoder--suggestion\"><div class=\"mapboxgl-ctrl-geocoder--suggestion-title\">' + placeName[0]+ '</div><div class=\"mapboxgl-ctrl-geocoder--suggestion-address\">' + placeName.splice(1, placeName.length).join(',') + '</div></div>';\n    }\n  },\n\n  onAdd: function(map) {\n    this._map = map;\n\n    this.setLanguage();\n\n    this.geocoderService = mbxGeocoder(\n      MapboxClient({\n        accessToken: this.options.accessToken,\n        origin: this.options.origin\n      })\n    );\n\n    this.eventManager = new MapboxEventManager(this.options);\n\n    this._onChange = this._onChange.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._onBlur = this._onBlur.bind(this);\n    this._showButton = this._showButton.bind(this);\n    this._hideButton = this._hideButton.bind(this);\n    this._onQueryResult = this._onQueryResult.bind(this);\n    this.clear = this.clear.bind(this);\n    this._updateProximity = this._updateProximity.bind(this);\n    this._collapse = this._collapse.bind(this);\n    this._unCollapse = this._unCollapse.bind(this);\n    this._clear = this._clear.bind(this);\n    this._clearOnBlur = this._clearOnBlur.bind(this);\n\n    var el = (this.container = document.createElement('div'));\n    el.className = 'mapboxgl-ctrl-geocoder mapboxgl-ctrl';\n\n    var searchIcon = this.createIcon('search', '<path d=\"M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z\"/>')\n\n    this._inputEl = document.createElement('input');\n    this._inputEl.type = 'text';\n    this._inputEl.className = 'mapboxgl-ctrl-geocoder--input';\n\n    this.setPlaceholder();\n\n    if (this.options.collapsed) {\n      this._collapse();\n      this.container.addEventListener('mouseenter', this._unCollapse);\n      this.container.addEventListener('mouseleave', this._collapse);\n      this._inputEl.addEventListener('focus', this._unCollapse);\n    }\n\n    if (this.options.collapsed || this.options.clearOnBlur) {\n      this._inputEl.addEventListener('blur', this._onBlur);\n    }\n\n    this._inputEl.addEventListener('keydown', debounce(this._onKeyDown, 200));\n    this._inputEl.addEventListener('change', this._onChange);\n    this.container.addEventListener('mouseenter', this._showButton);\n    this.container.addEventListener('mouseleave', this._hideButton);\n    this._inputEl.addEventListener('keyup', function(e){\n      this.eventManager.keyevent(e, this);\n    }.bind(this));\n\n    var actions = document.createElement('div');\n    actions.classList.add('mapboxgl-ctrl-geocoder--pin-right');\n\n    this._clearEl = document.createElement('button');\n    this._clearEl.setAttribute('aria-label', 'Clear');\n    this._clearEl.addEventListener('click', this.clear);\n    this._clearEl.className = 'mapboxgl-ctrl-geocoder--button';\n\n    var buttonIcon = this.createIcon('close', '<path d=\"M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z\"/>')\n    this._clearEl.appendChild(buttonIcon);\n\n    this._loadingEl = this.createIcon('loading', '<path fill=\"#333\" d=\"M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z\"/><path opacity=\".1\" d=\"M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z\"/>');\n\n    actions.appendChild(this._clearEl);\n    actions.appendChild(this._loadingEl);\n\n    el.appendChild(searchIcon);\n    el.appendChild(this._inputEl);\n    el.appendChild(actions);\n\n    this._typeahead = new Typeahead(this._inputEl, [], {\n      filter: false,\n      minLength: this.options.minLength,\n      limit: this.options.limit\n    });\n\n    this.setRenderFunction(this.options.render);\n    this._typeahead.getItemValue = this.options.getItemValue;\n\n    if (this.options.trackProximity) {\n      this._updateProximity();\n      this._map.on('moveend', this._updateProximity);\n    }\n\n    this.mapMarker = null;\n    this._handleMarker = this._handleMarker.bind(this);\n\n    this._mapboxgl = this.options.mapboxgl;\n    if (!this._mapboxgl && this.options.marker) {\n      console.error(\"No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl.\");\n      this.options.marker = false;\n    }\n\n    return el;\n  },\n\n  createIcon: function(name, path) {\n    var icon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    icon.setAttribute('class', 'mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-' + name);\n    icon.setAttribute('viewBox', '0 0 18 18');\n    icon.setAttribute('xml:space','preserve');\n    icon.setAttribute('width', 18);\n    icon.setAttribute('height', 18);\n    icon.innerHTML = path;\n    return icon;\n  },\n\n  onRemove: function() {\n    this.container.parentNode.removeChild(this.container);\n\n    if (this.options.trackProximity) {\n      this._map.off('moveend', this._updateProximity);\n    }\n\n    this._removeMarker();\n\n    this._map = null;\n\n    return this;\n  },\n\n  _onKeyDown: function(e) {\n    var ESC_KEY_CODE = 27,\n      TAB_KEY_CODE = 9;\n\n    if (e.keyCode === ESC_KEY_CODE && this.options.clearAndBlurOnEsc) {\n      this._clear(e);\n      return this._inputEl.blur();\n    }\n\n    // if target has shadowRoot, then get the actual active element inside the shadowRoot\n    var target = e.target && e.target.shadowRoot\n      ? e.target.shadowRoot.activeElement\n      : e.target;\n    var value = target ? target.value : '';\n    if (!value) {\n      this.fresh = true;\n      // the user has removed all the text\n      if (e.keyCode !== TAB_KEY_CODE) this.clear(e);\n      return (this._clearEl.style.display = 'none');\n    }\n\n    // TAB, ESC, LEFT, RIGHT, ENTER, UP, DOWN\n    if (e.metaKey || [TAB_KEY_CODE, ESC_KEY_CODE, 37, 39, 13, 38, 40].indexOf(e.keyCode) !== -1)\n      return;\n\n    if (target.value.length >= this.options.minLength) {\n      this._geocode(target.value);\n    }\n  },\n\n  _showButton: function() {\n    if (this._typeahead.selected) this._clearEl.style.display = 'block';\n  },\n\n  _hideButton: function() {\n    if (this._typeahead.selected) this._clearEl.style.display = 'none';\n  },\n\n  _onBlur: function(e) {\n    if (this.options.clearOnBlur) {\n      this._clearOnBlur(e);\n    }\n    if (this.options.collapsed) {\n      this._collapse();\n    }\n  },\n  _onChange: function() {\n    var selected = this._typeahead.selected;\n    if (selected  && selected.id !== this.lastSelected) {\n      this._clearEl.style.display = 'none';\n      if (this.options.flyTo) {\n        var flyOptions;\n        if (selected.properties && !exceptions[selected.properties.short_code] && selected.bbox) {\n          var bbox = selected.bbox;\n          flyOptions = extend({}, this.options.flyTo);\n          this._map.fitBounds([[bbox[0], bbox[1]], [bbox[2], bbox[3]]], flyOptions);\n        } else if (selected.properties && exceptions[selected.properties.short_code]) {\n          // Certain geocoder search results return (and therefore zoom to fit)\n          // an unexpectedly large bounding box: for example, both Russia and the\n          // USA span both sides of -180/180, or France includes the island of\n          // Reunion in the Indian Ocean. An incomplete list of these exceptions\n          // at ./exceptions.json provides \"reasonable\" bounding boxes as a\n          // short-term solution; this may be amended as necessary.\n          flyOptions = extend({}, this.options.flyTo);\n          this._map.fitBounds(exceptions[selected.properties.short_code].bbox, flyOptions);\n        } else {\n          var defaultFlyOptions = {\n            zoom: this.options.zoom\n          }\n          flyOptions = extend({}, defaultFlyOptions, this.options.flyTo);\n          //  ensure that center is not overriden by custom options\n          flyOptions.center = selected.center;\n          this._map.flyTo(flyOptions);\n        }\n      }\n      if (this.options.marker && this._mapboxgl){\n        this._handleMarker(selected);\n      }\n\n      // After selecting a feature, re-focus the textarea and set\n      // cursor at start.\n      this._inputEl.focus();\n      this._inputEl.scrollLeft = 0;\n      this._inputEl.setSelectionRange(0, 0);\n\n      this._eventEmitter.emit('result', { result: selected });\n      this.eventManager.select(selected, this);\n      this.lastSelected = selected.id;\n    }\n  },\n\n  _geocode: function(searchInput) {\n    this._loadingEl.style.display = 'block';\n    this._eventEmitter.emit('loading', { query: searchInput });\n    this.inputString = searchInput;\n    // Possible config proprerties to pass to client\n    var keys = [\n      'bbox',\n      'limit',\n      'proximity',\n      'countries',\n      'types',\n      'language',\n      'reverseMode'\n    ];\n    var self = this;\n    // Create config object\n    var config = keys.reduce(function(config, key) {\n      if (self.options[key]) {\n        // countries, types, and language need to be passed in as arrays to client\n        // https://github.com/mapbox/mapbox-sdk-js/blob/master/services/geocoding.js#L38-L47\n        ['countries', 'types', 'language'].indexOf(key) > -1\n          ? (config[key] = self.options[key].split(/[\\s,]+/))\n          : (config[key] = self.options[key]);\n\n        if (key === 'proximity' && self.options[key] && self.options[key].longitude && self.options[key].latitude) {\n          config[key] = [self.options[key].longitude, self.options[key].latitude]\n        }\n      }\n      return config;\n    }, {});\n\n    var request;\n    // check if searchInput resembles coordinates, and if it does,\n    // make the request a reverseGeocode\n    if (\n      this.options.reverseGeocode &&\n      /(-?\\d+\\.?\\d*)[, ]+(-?\\d+\\.?\\d*)[ ]*$/.test(searchInput)\n    ) {\n      // parse coordinates\n      var coords = searchInput.split(/[\\s(,)?]+/).map(function(c) {\n        return parseFloat(c, 10);\n      }).reverse();\n\n      // client only accepts one type for reverseGeocode, so\n      // use first config type if one, if not default to poi\n      config.types ? [config.types[0]] : [\"poi\"];\n      config = extend(config, { query: coords, limit: 1 });\n      request = this.geocoderService.reverseGeocode(config).send();\n    } else {\n      config = extend(config, { query: searchInput });\n      request = this.geocoderService.forwardGeocode(config).send();\n    }\n\n    var localGeocoderRes = [];\n    if (this.options.localGeocoder) {\n      localGeocoderRes = this.options.localGeocoder(searchInput);\n      if (!localGeocoderRes) {\n        localGeocoderRes = [];\n      }\n    }\n\n    request.then(\n      function(response) {\n        this._loadingEl.style.display = 'none';\n\n        var res = {};\n\n        if (response.statusCode == '200') {\n          res = response.body;\n        }\n\n        res.config = config;\n        if (this.fresh){\n          this.eventManager.start(this);\n          this.fresh = false;\n        }\n\n        // supplement Mapbox Geocoding API results with locally populated results\n        res.features = res.features\n          ? localGeocoderRes.concat(res.features)\n          : localGeocoderRes;\n\n        // apply results filter if provided\n        if (this.options.filter && res.features.length) {\n          res.features = res.features.filter(this.options.filter);\n        }\n\n        if (res.features.length) {\n          this._clearEl.style.display = 'block';\n          this._eventEmitter.emit('results', res);\n          this._typeahead.update(res.features);\n        } else {\n          this._clearEl.style.display = 'none';\n          this._typeahead.selected = null;\n          this._renderNoResults();\n          this._eventEmitter.emit('results', res);\n        }\n\n      }.bind(this)\n    );\n\n    request.catch(\n      function(err) {\n        this._loadingEl.style.display = 'none';\n\n        // in the event of an error in the Mapbox Geocoding API still display results from the localGeocoder\n        if (localGeocoderRes.length && this.options.localGeocoder) {\n          this._clearEl.style.display = 'block';\n          this._typeahead.update(localGeocoderRes);\n        } else {\n          this._clearEl.style.display = 'none';\n          this._typeahead.selected = null;\n          this._renderError();\n        }\n\n        this._eventEmitter.emit('results', { features: localGeocoderRes });\n        this._eventEmitter.emit('error', { error: err });\n      }.bind(this)\n    );\n\n    return request;\n  },\n\n  /**\n   * Shared logic for clearing input\n   * @param {Event} [ev] the event that triggered the clear, if available\n   * @private\n   *\n   */\n  _clear: function(ev) {\n    if (ev) ev.preventDefault();\n    this._inputEl.value = '';\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._onChange();\n    this._clearEl.style.display = 'none';\n    this._removeMarker();\n    this.lastSelected = null;\n    this._eventEmitter.emit('clear');\n    this.fresh = true;\n  },\n\n  /**\n   * Clear and then focus the input.\n   * @param {Event} [ev] the event that triggered the clear, if available\n   *\n   */\n  clear: function(ev) {\n    this._clear(ev);\n    this._inputEl.focus();\n  },\n\n\n  /**\n   * Clear the input, without refocusing it. Used to implement clearOnBlur\n   * constructor option.\n   * @param {Event} [ev] the blur event\n   * @private\n   */\n  _clearOnBlur: function(ev) {\n    var ctx = this;\n\n    /**\n    * If relatedTarget is not found, assume user targeted the suggestions list.\n    * In that case, do not clear on blur. There are other edge cases where\n    * ev.relatedTarget could be null. Clicking on list always results in null\n    * relatedtarget because of upstream behavior in `suggestions`.\n    *\n    * The ideal solution would be to check if ev.relatedTarget is a child of\n    * the list. See issue #258 for details on why we can't do that yet.\n    */\n    if (ev.relatedTarget) {\n      ctx._clear(ev);\n    }\n  },\n\n  _onQueryResult: function(response) {\n    var results = response.body;\n    if (!results.features.length) return;\n    var result = results.features[0];\n    this._typeahead.selected = result;\n    this._inputEl.value = result.place_name;\n    this._onChange();\n  },\n\n  _updateProximity: function() {\n    // proximity is designed for local scale, if the user is looking at the whole world,\n    // it doesn't make sense to factor in the arbitrary centre of the map\n    if (this._map.getZoom() > 9) {\n      var center = this._map.getCenter().wrap();\n      this.setProximity({ longitude: center.lng, latitude: center.lat });\n    } else {\n      this.setProximity(null);\n    }\n  },\n\n  _collapse: function() {\n    // do not collapse if input is in focus\n    if (!this._inputEl.value && this._inputEl !== document.activeElement) this.container.classList.add('mapboxgl-ctrl-geocoder--collapsed');\n  },\n\n  _unCollapse: function() {\n    this.container.classList.remove('mapboxgl-ctrl-geocoder--collapsed');\n  },\n\n  /**\n   * Set & query the input\n   * @param {string} searchInput location name or other search input\n   * @returns {MapboxGeocoder} this\n   */\n  query: function(searchInput) {\n    this._geocode(searchInput).then(this._onQueryResult);\n    return this;\n  },\n\n  _renderError: function(){\n    var errorMessage = \"<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>\"\n    this._renderMessage(errorMessage);\n  },\n\n  _renderNoResults: function(){\n    var errorMessage = \"<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>\";\n    this._renderMessage(errorMessage);\n  },\n\n  _renderMessage: function(msg){\n    this._typeahead.update([]);\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._typeahead.renderError(msg);\n  },\n\n  /**\n   * Get the text to use as the search bar placeholder\n   *\n   * If placeholder is provided in options, then use options.placeholder\n   * Otherwise, if language is provided in options, then use the localized string of the first language if available\n   * Otherwise use the default\n   *\n   * @returns {String} the value to use as the search bar placeholder\n   * @private\n   */\n  _getPlaceholderText: function(){\n    if (this.options.placeholder) return this.options.placeholder;\n    if (this.options.language){\n      var firstLanguage = this.options.language.split(\",\")[0];\n      var language = subtag.language(firstLanguage);\n      var localizedValue = localization.placeholder[language];\n      if (localizedValue)  return localizedValue;\n    }\n    return 'Search';\n  },\n\n  /**\n   * Set input\n   * @param {string} searchInput location name or other search input\n   * @returns {MapboxGeocoder} this\n   */\n  setInput: function(searchInput) {\n    // Set input value to passed value and clear everything else.\n    this._inputEl.value = searchInput;\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._onChange();\n    return this;\n  },\n\n  /**\n   * Set proximity\n   * @param {Object} proximity The new options.proximity value. This is a geographical point given as an object with latitude and longitude properties.\n   * @returns {MapboxGeocoder} this\n   */\n  setProximity: function(proximity) {\n    this.options.proximity = proximity;\n    return this;\n  },\n\n  /**\n   * Get proximity\n   * @returns {Object} The geocoder proximity\n   */\n  getProximity: function() {\n    return this.options.proximity;\n  },\n\n  /**\n   * Set the render function used in the results dropdown\n   * @param {Function} fn The function to use as a render function. This function accepts a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object as input and returns a string.\n   * @returns {MapboxGeocoder} this\n   */\n  setRenderFunction: function(fn){\n    if (fn && typeof(fn) == \"function\"){\n      this._typeahead.render = fn;\n    }\n    return this;\n  },\n\n  /**\n   * Get the function used to render the results dropdown\n   *\n   * @returns {Function} the render function\n   */\n  getRenderFunction: function(){\n    return this._typeahead.render;\n  },\n\n  /**\n   * Get the language to use in UI elements and when making search requests\n   *\n   * Look first at the explicitly set options otherwise use the browser's language settings\n   * @param {String} language Specify the language to use for response text and query result weighting. Options are IETF language tags comprised of a mandatory ISO 639-1 language code and optionally one or more IETF subtags for country or script. More than one value can also be specified, separated by commas.\n   * @returns {MapboxGeocoder} this\n   */\n  setLanguage: function(language){\n    var browserLocale = navigator.language || navigator.userLanguage || navigator.browserLanguage;\n    this.options.language = language || this.options.language || browserLocale;\n    return this;\n  },\n\n  /**\n   * Get the language to use in UI elements and when making search requests\n   * @returns {String} The language(s) used by the plugin, if any\n   */\n  getLanguage: function(){\n    return this.options.language;\n  },\n\n  /**\n   * Get the zoom level the map will move to when there is no bounding box on the selected result\n   * @returns {Number} the map zoom\n   */\n  getZoom: function(){\n    return this.options.zoom;\n  },\n\n  /**\n   * Set the zoom level\n   * @param {Number} zoom The zoom level that the map should animate to when a `bbox` isn't found in the response. If a `bbox` is found the map will fit to the `bbox`.\n   * @returns {MapboxGeocoder} this\n   */\n  setZoom: function(zoom){\n    this.options.zoom = zoom;\n    return this;\n  },\n\n  /**\n   * Get the parameters used to fly to the selected response, if any\n   * @returns {MapboxGeocoder} this\n   */\n  getFlyTo: function(){\n    return this.options.flyTo;\n  },\n\n  /**\n   * Set the flyTo options\n   * @param {Object|Boolean} flyTo  If false, animating the map to a selected result is disabled. If true, animating the map will use the default animation parameters. If an object, the object will be passed to the flyTo map method to specify a custom animation.\n   */\n  setFlyTo: function(flyTo){\n    this.options.flyTo = flyTo;\n    return this;\n  },\n\n  /**\n   * Get the value of the placeholder string\n   * @returns {String} The input element's placeholder value\n   */\n  getPlaceholder: function(){\n    return this.options.placeholder;\n  },\n\n  /**\n   * Set the value of the input element's placeholder\n   * @param {String} placeholder the text to use as the input element's placeholder\n   * @returns {MapboxGeocoder} this\n   */\n  setPlaceholder: function(placeholder){\n    this.placeholder = (placeholder) ? placeholder : this._getPlaceholderText();\n    this._inputEl.placeholder = this.placeholder;\n    return this\n  },\n\n  /**\n   * Get the bounding box used by the plugin\n   * @returns {Array<Number>} the bounding box, if any\n   */\n  getBbox: function(){\n    return this.options.bbox;\n  },\n\n  /**\n   * Set the bounding box to limit search results to\n   * @param {Array<Number>} bbox a bounding box given as an array in the format [minX, minY, maxX, maxY].\n   * @returns {MapboxGeocoder} this\n   */\n  setBbox: function(bbox){\n    this.options.bbox = bbox;\n    return this;\n  },\n\n  /**\n   * Get a list of the countries to limit search results to\n   * @returns {String} a comma separated list of countries to limit to, if any\n   */\n  getCountries: function(){\n    return this.options.countries;\n  },\n\n  /**\n   * Set the countries to limit search results to\n   * @param {String} countries a comma separated list of countries to limit to\n   * @returns {MapboxGeocoder} this\n   */\n  setCountries: function(countries){\n    this.options.countries = countries;\n    return this;\n  },\n\n  /**\n   * Get a list of the types to limit search results to\n   * @returns {String} a comma separated list of types to limit to\n   */\n  getTypes: function(){\n    return this.options.types;\n  },\n\n  /**\n   * Set the types to limit search results to\n   * @param {String} countries a comma separated list of types to limit to\n   * @returns {MapboxGeocoder} this\n   */\n  setTypes: function(types){\n    this.options.types = types;\n    return this;\n  },\n\n  /**\n   * Get the minimum number of characters typed to trigger results used in the plugin\n   * @returns {Number} The minimum length in characters before a search is triggered\n   */\n  getMinLength: function(){\n    return this.options.minLength;\n  },\n\n  /**\n   * Set the minimum number of characters typed to trigger results used by the plugin\n   * @param {Number} minLength the minimum length in characters\n   * @returns {MapboxGeocoder} this\n   */\n  setMinLength: function(minLength){\n    this.options.minLength = minLength;\n    if (this._typeahead)  this._typeahead.minLength = minLength;\n    return this;\n  },\n\n  /**\n   * Get the limit value for the number of results to display used by the plugin\n   * @returns {Number} The limit value for the number of results to display used by the plugin\n   */\n  getLimit: function(){\n    return this.options.limit;\n  },\n\n  /**\n   * Set the limit value for the number of results to display used by the plugin\n   * @param {Number} limit the number of search results to return\n   * @returns {MapboxGeocoder}\n   */\n  setLimit: function(limit){\n    this.options.limit = limit;\n    if (this._typeahead) this._typeahead.options.limit = limit;\n    return this;\n  },\n\n  /**\n   * Get the filter function used by the plugin\n   * @returns {Function} the filter function\n   */\n  getFilter: function(){\n    return this.options.filter;\n  },\n\n  /**\n   * Set the filter function used by the plugin.\n   * @param {Function} filter A function which accepts a Feature in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format to filter out results from the Geocoding API response before they are included in the suggestions list. Return `true` to keep the item, `false` otherwise.\n   * @returns {MapboxGeocoder} this\n   */\n  setFilter: function(filter){\n    this.options.filter = filter;\n    return this;\n  },\n\n  /**\n   * Handle the placement of a result marking the selected result\n   * @private\n   * @param {Object} selected the selected geojson feature\n   * @returns {MapboxGeocoder} this\n   */\n  _handleMarker: function(selected){\n    // clean up any old marker that might be present\n    this._removeMarker();\n    var defaultMarkerOptions = {\n      color: '#4668F2'\n    }\n    var markerOptions = extend({}, defaultMarkerOptions, this.options.marker)\n    this.mapMarker = new this._mapboxgl.Marker(markerOptions);\n    this.mapMarker\n      .setLngLat(selected.center)\n      .addTo(this._map);\n    return this;\n  },\n\n  /**\n   * Handle the removal of a result marker\n   * @private\n   */\n  _removeMarker: function(){\n    if (this.mapMarker){\n      this.mapMarker.remove();\n      this.mapMarker = null;\n    }\n  },\n\n  /**\n   * Subscribe to events that happen within the plugin.\n   * @param {String} type name of event. Available events and the data passed into their respective event objects are:\n   *\n   * - __clear__ `Emitted when the input is cleared`\n   * - __loading__ `{ query } Emitted when the geocoder is looking up a query`\n   * - __results__ `{ results } Fired when the geocoder returns a response`\n   * - __result__ `{ result } Fired when input is set`\n   * - __error__ `{ error } Error as string`\n   * @param {Function} fn function that's called when the event is emitted.\n   * @returns {MapboxGeocoder} this;\n   */\n  on: function(type, fn) {\n    this._eventEmitter.on(type, fn);\n    return this;\n  },\n\n  /**\n   * Remove an event\n   * @returns {MapboxGeocoder} this\n   * @param {String} type Event name.\n   * @param {Function} fn Function that should unsubscribe to the event emitted.\n   */\n  off: function(type, fn) {\n    this._eventEmitter.removeListener(type, fn);\n    this.eventManager.remove();\n    return this;\n  }\n};\n\nmodule.exports = MapboxGeocoder;\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as vec4 from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  var result = vec4.transformMat4([], vector, matrix);\n  vec4.scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\n//# sourceMappingURL=math-utils.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n  var len1 = x1 * x1 + y1 * y1;\n\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'viewport-mercator-project: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { createMat4, transformVector } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nvar PI = Math.PI;\nvar PI_4 = PI / 4;\nvar DEGREES_TO_RADIANS = PI / 180;\nvar RADIANS_TO_DEGREES = 180 / PI;\nvar TILE_SIZE = 512;\nvar EARTH_CIRCUMFERENCE = 40.03e6;\nvar DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return Math.log2(scale);\n}\nexport function lngLatToWorld(_ref, scale) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      lng = _ref2[0],\n      lat = _ref2[1];\n\n  assert(Number.isFinite(lng) && Number.isFinite(scale));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  scale *= TILE_SIZE;\n  var lambda2 = lng * DEGREES_TO_RADIANS;\n  var phi2 = lat * DEGREES_TO_RADIANS;\n  var x = scale * (lambda2 + PI) / (2 * PI);\n  var y = scale * (PI - Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat(_ref3, scale) {\n  var _ref4 = _slicedToArray(_ref3, 2),\n      x = _ref4[0],\n      y = _ref4[1];\n\n  scale *= TILE_SIZE;\n  var lambda2 = x / scale * (2 * PI) - PI;\n  var phi2 = 2 * (Math.atan(Math.exp(PI - y / scale * (2 * PI))) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom(_ref5) {\n  var latitude = _ref5.latitude;\n  assert(Number.isFinite(latitude));\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function getDistanceScales(_ref6) {\n  var latitude = _ref6.latitude,\n      longitude = _ref6.longitude,\n      zoom = _ref6.zoom,\n      scale = _ref6.scale,\n      _ref6$highPrecision = _ref6.highPrecision,\n      highPrecision = _ref6$highPrecision === void 0 ? false : _ref6$highPrecision;\n  scale = scale !== undefined ? scale : zoomToScale(zoom);\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude) && Number.isFinite(scale));\n  var result = {};\n  var worldSize = TILE_SIZE * scale;\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  var pixelsPerDegreeX = worldSize / 360;\n  var pixelsPerDegreeY = pixelsPerDegreeX / latCosine;\n  var altPixelsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  result.pixelsPerMeter = [altPixelsPerMeter, -altPixelsPerMeter, altPixelsPerMeter];\n  result.metersPerPixel = [1 / altPixelsPerMeter, -1 / altPixelsPerMeter, 1 / altPixelsPerMeter];\n  result.pixelsPerDegree = [pixelsPerDegreeX, -pixelsPerDegreeY, altPixelsPerMeter];\n  result.degreesPerPixel = [1 / pixelsPerDegreeX, -1 / pixelsPerDegreeY, 1 / altPixelsPerMeter];\n\n  if (highPrecision) {\n    var latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    var pixelsPerDegreeY2 = pixelsPerDegreeX * latCosine2 / 2;\n    var altPixelsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    var altPixelsPerMeter2 = altPixelsPerDegree2 / pixelsPerDegreeY * altPixelsPerMeter;\n    result.pixelsPerDegree2 = [0, -pixelsPerDegreeY2, altPixelsPerDegree2];\n    result.pixelsPerMeter2 = [altPixelsPerMeter2, 0, altPixelsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  var _lngLatZ = _slicedToArray(lngLatZ, 3),\n      longitude = _lngLatZ[0],\n      latitude = _lngLatZ[1],\n      z0 = _lngLatZ[2];\n\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var scale = 1;\n\n  var _getDistanceScales = getDistanceScales({\n    longitude: longitude,\n    latitude: latitude,\n    scale: scale,\n    highPrecision: true\n  }),\n      pixelsPerMeter = _getDistanceScales.pixelsPerMeter,\n      pixelsPerMeter2 = _getDistanceScales.pixelsPerMeter2;\n\n  var worldspace = lngLatToWorld(lngLatZ, scale);\n  worldspace[0] += x * (pixelsPerMeter[0] + pixelsPerMeter2[0] * y);\n  worldspace[1] += y * (pixelsPerMeter[1] + pixelsPerMeter2[1] * y);\n  var newLngLat = worldToLngLat(worldspace, scale);\n  var newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix(_ref7) {\n  var height = _ref7.height,\n      pitch = _ref7.pitch,\n      bearing = _ref7.bearing,\n      altitude = _ref7.altitude,\n      _ref7$center = _ref7.center,\n      center = _ref7$center === void 0 ? null : _ref7$center,\n      _ref7$flipY = _ref7.flipY,\n      flipY = _ref7$flipY === void 0 ? false : _ref7$flipY;\n  var vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.scale(vm, vm, [1, 1, 1 / height]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n\n  if (flipY) {\n    mat4.scale(vm, vm, [1, -1, 1]);\n  }\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters(_ref8) {\n  var width = _ref8.width,\n      height = _ref8.height,\n      _ref8$altitude = _ref8.altitude,\n      altitude = _ref8$altitude === void 0 ? DEFAULT_ALTITUDE : _ref8$altitude,\n      _ref8$pitch = _ref8.pitch,\n      pitch = _ref8$pitch === void 0 ? 0 : _ref8$pitch,\n      _ref8$nearZMultiplier = _ref8.nearZMultiplier,\n      nearZMultiplier = _ref8$nearZMultiplier === void 0 ? 1 : _ref8$nearZMultiplier,\n      _ref8$farZMultiplier = _ref8.farZMultiplier,\n      farZMultiplier = _ref8$farZMultiplier === void 0 ? 1 : _ref8$farZMultiplier;\n  var pitchRadians = pitch * DEGREES_TO_RADIANS;\n  var halfFov = Math.atan(0.5 / altitude);\n  var topHalfSurfaceDistance = Math.sin(halfFov) * altitude / Math.sin(Math.PI / 2 - pitchRadians - halfFov);\n  var farZ = Math.cos(Math.PI / 2 - pitchRadians) * topHalfSurfaceDistance + altitude;\n  return {\n    fov: 2 * Math.atan(height / 2 / altitude),\n    aspect: width / height,\n    focalDistance: altitude,\n    near: nearZMultiplier,\n    far: farZ * farZMultiplier\n  };\n}\nexport function getProjectionMatrix(_ref9) {\n  var width = _ref9.width,\n      height = _ref9.height,\n      pitch = _ref9.pitch,\n      altitude = _ref9.altitude,\n      nearZMultiplier = _ref9.nearZMultiplier,\n      farZMultiplier = _ref9.farZMultiplier;\n\n  var _getProjectionParamet = getProjectionParameters({\n    width: width,\n    height: height,\n    altitude: altitude,\n    pitch: pitch,\n    nearZMultiplier: nearZMultiplier,\n    farZMultiplier: farZMultiplier\n  }),\n      fov = _getProjectionParamet.fov,\n      aspect = _getProjectionParamet.aspect,\n      near = _getProjectionParamet.near,\n      far = _getProjectionParamet.far;\n\n  var projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  var _xyz2 = _slicedToArray(xyz, 3),\n      x = _xyz2[0],\n      y = _xyz2[1],\n      _xyz2$ = _xyz2[2],\n      z = _xyz2$ === void 0 ? 0 : _xyz2$;\n\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix) {\n  var targetZ = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  var _xyz3 = _slicedToArray(xyz, 3),\n      x = _xyz3[0],\n      y = _xyz3[1],\n      z = _xyz3[2];\n\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    var coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  var coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  var coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  var z0 = coord0[2];\n  var z1 = coord1[2];\n  var t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { createMat4 } from './math-utils';\nimport { worldToPixels, pixelsToWorld } from './web-mercator-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nvar IDENTITY = createMat4();\n\nvar Viewport = function () {\n  function Viewport() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        width = _ref.width,\n        height = _ref.height,\n        _ref$viewMatrix = _ref.viewMatrix,\n        viewMatrix = _ref$viewMatrix === void 0 ? IDENTITY : _ref$viewMatrix,\n        _ref$projectionMatrix = _ref.projectionMatrix,\n        projectionMatrix = _ref$projectionMatrix === void 0 ? IDENTITY : _ref$projectionMatrix;\n\n    _classCallCheck(this, Viewport);\n\n    this.width = width || 1;\n    this.height = height || 1;\n    this.scale = 1;\n    this.pixelsPerMeter = 1;\n    this.viewMatrix = viewMatrix;\n    this.projectionMatrix = projectionMatrix;\n    var vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    var m = createMat4();\n    mat4.scale(m, m, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(m, m, [1, -1, 0]);\n    mat4.multiply(m, m, this.viewProjectionMatrix);\n    var mInverse = mat4.invert(createMat4(), m);\n\n    if (!mInverse) {\n      throw new Error('Pixel project matrix not invertible');\n    }\n\n    this.pixelProjectionMatrix = m;\n    this.pixelUnprojectionMatrix = mInverse;\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  _createClass(Viewport, [{\n    key: \"equals\",\n    value: function equals(viewport) {\n      if (!(viewport instanceof Viewport)) {\n        return false;\n      }\n\n      return viewport.width === this.width && viewport.height === this.height && mat4.equals(viewport.projectionMatrix, this.projectionMatrix) && mat4.equals(viewport.viewMatrix, this.viewMatrix);\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$topLeft = _ref2.topLeft,\n          topLeft = _ref2$topLeft === void 0 ? true : _ref2$topLeft;\n\n      var worldPosition = this.projectPosition(xyz);\n      var coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n      var _coord = _slicedToArray(coord, 2),\n          x = _coord[0],\n          y = _coord[1];\n\n      var y2 = topLeft ? y : this.height - y;\n      return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$topLeft = _ref3.topLeft,\n          topLeft = _ref3$topLeft === void 0 ? true : _ref3$topLeft,\n          targetZ = _ref3.targetZ;\n\n      var _xyz = _slicedToArray(xyz, 3),\n          x = _xyz[0],\n          y = _xyz[1],\n          z = _xyz[2];\n\n      var y2 = topLeft ? y : this.height - y;\n      var targetZWorld = targetZ && targetZ * this.pixelsPerMeter;\n      var coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n\n      var _this$unprojectPositi = this.unprojectPosition(coord),\n          _this$unprojectPositi2 = _slicedToArray(_this$unprojectPositi, 3),\n          X = _this$unprojectPositi2[0],\n          Y = _this$unprojectPositi2[1],\n          Z = _this$unprojectPositi2[2];\n\n      if (Number.isFinite(z)) {\n        return [X, Y, Z];\n      }\n\n      return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      var _this$projectFlat = this.projectFlat(xyz),\n          _this$projectFlat2 = _slicedToArray(_this$projectFlat, 2),\n          X = _this$projectFlat2[0],\n          Y = _this$projectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.pixelsPerMeter;\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"unprojectPosition\",\n    value: function unprojectPosition(xyz) {\n      var _this$unprojectFlat = this.unprojectFlat(xyz),\n          _this$unprojectFlat2 = _slicedToArray(_this$unprojectFlat, 2),\n          X = _this$unprojectFlat2[0],\n          Y = _this$unprojectFlat2[1];\n\n      var Z = (xyz[2] || 0) / this.pixelsPerMeter;\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"projectFlat\",\n    value: function projectFlat(xyz) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return xyz;\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xyz) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return xyz;\n    }\n  }]);\n\n  return Viewport;\n}();\n\nexport { Viewport as default };\n//# sourceMappingURL=viewport.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport WebMercatorViewport from './web-mercator-viewport';\nimport assert from './assert';\nexport default function fitBounds(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      bounds = _ref.bounds,\n      _ref$padding = _ref.padding,\n      padding = _ref$padding === void 0 ? 0 : _ref$padding,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? [0, 0] : _ref$offset;\n\n  var _bounds = _slicedToArray(bounds, 2),\n      _bounds$ = _slicedToArray(_bounds[0], 2),\n      west = _bounds$[0],\n      south = _bounds$[1],\n      _bounds$2 = _slicedToArray(_bounds[1], 2),\n      east = _bounds$2[0],\n      north = _bounds$2[1];\n\n  if (Number.isFinite(padding)) {\n    var p = padding;\n    padding = {\n      top: p,\n      bottom: p,\n      left: p,\n      right: p\n    };\n  } else {\n    assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  }\n\n  var viewport = new WebMercatorViewport({\n    width: width,\n    height: height,\n    longitude: 0,\n    latitude: 0,\n    zoom: 0\n  });\n  var nw = viewport.project([west, north]);\n  var se = viewport.project([east, south]);\n  var size = [Math.abs(se[0] - nw[0]), Math.abs(se[1] - nw[1])];\n  var targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  var scaleX = targetSize[0] / size[0];\n  var scaleY = targetSize[1] / size[1];\n  var offsetX = (padding.right - padding.left) / 2 / scaleX;\n  var offsetY = (padding.bottom - padding.top) / 2 / scaleY;\n  var center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  var centerLngLat = viewport.unproject(center);\n  var zoom = viewport.zoom + Math.log2(Math.abs(Math.min(scaleX, scaleY)));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom: zoom\n  };\n}\n//# sourceMappingURL=fit-bounds.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Viewport from './viewport';\nimport { zoomToScale, pixelsToWorld, lngLatToWorld, worldToLngLat, getProjectionMatrix, getDistanceScales, getViewMatrix } from './web-mercator-utils';\nimport _fitBounds from './fit-bounds';\nimport * as vec2 from 'gl-matrix/vec2';\n\nvar WebMercatorViewport = function (_Viewport) {\n  _inherits(WebMercatorViewport, _Viewport);\n\n  function WebMercatorViewport() {\n    var _this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        width = _ref.width,\n        height = _ref.height,\n        _ref$latitude = _ref.latitude,\n        latitude = _ref$latitude === void 0 ? 0 : _ref$latitude,\n        _ref$longitude = _ref.longitude,\n        longitude = _ref$longitude === void 0 ? 0 : _ref$longitude,\n        _ref$zoom = _ref.zoom,\n        zoom = _ref$zoom === void 0 ? 0 : _ref$zoom,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? 0 : _ref$bearing,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? 1.5 : _ref$altitude,\n        nearZMultiplier = _ref.nearZMultiplier,\n        farZMultiplier = _ref.farZMultiplier;\n\n    _classCallCheck(this, WebMercatorViewport);\n\n    width = width || 1;\n    height = height || 1;\n    var scale = zoomToScale(zoom);\n    altitude = Math.max(0.75, altitude);\n    var center = lngLatToWorld([longitude, latitude], scale);\n    center[2] = 0;\n    var projectionMatrix = getProjectionMatrix({\n      width: width,\n      height: height,\n      pitch: pitch,\n      bearing: bearing,\n      altitude: altitude,\n      nearZMultiplier: nearZMultiplier || 1 / height,\n      farZMultiplier: farZMultiplier || 1.01\n    });\n    var viewMatrix = getViewMatrix({\n      height: height,\n      center: center,\n      pitch: pitch,\n      bearing: bearing,\n      altitude: altitude,\n      flipY: true\n    });\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WebMercatorViewport).call(this, {\n      width: width,\n      height: height,\n      viewMatrix: viewMatrix,\n      projectionMatrix: projectionMatrix\n    }));\n    _this.latitude = latitude;\n    _this.longitude = longitude;\n    _this.zoom = zoom;\n    _this.pitch = pitch;\n    _this.bearing = bearing;\n    _this.altitude = altitude;\n    _this.scale = scale;\n    _this.center = center;\n    _this.pixelsPerMeter = getDistanceScales(_assertThisInitialized(_assertThisInitialized(_this))).pixelsPerMeter[2];\n    Object.freeze(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(WebMercatorViewport, [{\n    key: \"projectFlat\",\n    value: function projectFlat(lngLat) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return lngLatToWorld(lngLat, scale);\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xy) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return worldToLngLat(xy, scale);\n    }\n  }, {\n    key: \"getMapCenterByLngLatPosition\",\n    value: function getMapCenterByLngLatPosition(_ref2) {\n      var lngLat = _ref2.lngLat,\n          pos = _ref2.pos;\n      var fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n      var toLocation = lngLatToWorld(lngLat, this.scale);\n      var translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n      var newCenter = vec2.add([], this.center, translate);\n      return worldToLngLat(newCenter, this.scale);\n    }\n  }, {\n    key: \"getLocationAtPoint\",\n    value: function getLocationAtPoint(_ref3) {\n      var lngLat = _ref3.lngLat,\n          pos = _ref3.pos;\n      return this.getMapCenterByLngLatPosition({\n        lngLat: lngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var width = this.width,\n          height = this.height;\n\n      var _fitBounds2 = _fitBounds(Object.assign({\n        width: width,\n        height: height,\n        bounds: bounds\n      }, options)),\n          longitude = _fitBounds2.longitude,\n          latitude = _fitBounds2.latitude,\n          zoom = _fitBounds2.zoom;\n\n      return new WebMercatorViewport({\n        width: width,\n        height: height,\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n    }\n  }]);\n\n  return WebMercatorViewport;\n}(Viewport);\n\nexport { WebMercatorViewport as default };\n//# sourceMappingURL=web-mercator-viewport.js.map","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder'\nimport { FlyToInterpolator } from 'react-map-gl'\nimport WebMercatorViewport from 'viewport-mercator-project'\n\nconst VALID_POSITIONS = ['top-left', 'top-right', 'bottom-left', 'bottom-right']\n\nclass Geocoder extends PureComponent {\n  geocoder = null\n  cachedResult = null\n\n  componentDidMount() {\n    this.initializeGeocoder()\n  }\n\n  componentWillUnmount() {\n    this.removeGeocoder()\n  }\n\n  componentDidUpdate() {\n    this.removeGeocoder()\n    this.initializeGeocoder()\n  }\n\n  initializeGeocoder = () => {\n    const mapboxMap = this.getMapboxMap()\n    const containerNode = this.getContainerNode()\n    const {\n      mapboxApiAccessToken,\n      inputValue,\n      origin,\n      zoom,\n      placeholder,\n      proximity,\n      trackProximity,\n      collapsed,\n      clearAndBlurOnEsc,\n      clearOnBlur,\n      bbox,\n      types,\n      countries,\n      minLength,\n      limit,\n      language,\n      filter,\n      localGeocoder,\n      reverseGeocode,\n      enableEventLogging,\n      render,\n      getItemValue,\n      onInit,\n      position\n    } = this.props\n    const options = {\n      accessToken: mapboxApiAccessToken,\n      origin,\n      zoom,\n      flyTo: false,\n      placeholder,\n      proximity,\n      trackProximity,\n      collapsed,\n      clearAndBlurOnEsc,\n      clearOnBlur,\n      bbox,\n      types,\n      countries,\n      minLength,\n      limit,\n      language,\n      filter,\n      localGeocoder,\n      reverseGeocode,\n      enableEventLogging,\n      marker: false\n    }\n\n    if (render && typeof render === 'function') {\n      options.render = render\n    }\n\n    if (getItemValue && typeof getItemValue === 'function') {\n      options.getItemValue = getItemValue\n    }\n\n    this.geocoder = new MapboxGeocoder(options)\n    this.subscribeEvents()\n\n    if (containerNode) {\n      containerNode.appendChild(this.geocoder.onAdd(mapboxMap))\n    } else {\n      mapboxMap.addControl(this.geocoder, VALID_POSITIONS.find((_position) => position === _position))\n    }\n\n    if (inputValue !== undefined && inputValue !== null) {\n      this.geocoder.setInput(inputValue)\n    } else if (this.cachedResult) {\n      this.geocoder.setInput(this.cachedResult.place_name)\n    }\n\n    if (this.cachedResult || (inputValue !== undefined && inputValue !== null)) {\n      this.showClearIcon()\n    }\n\n    onInit(this.geocoder)\n  }\n\n  showClearIcon = () => {\n    // this is a hack to force clear icon to show if there is text in the input\n    this.geocoder._clearEl.style.display = 'block'\n  }\n\n  getMapboxMap = () => {\n    const { mapRef } = this.props\n\n    return (mapRef && mapRef.current && mapRef.current.getMap()) || null\n  }\n\n  getContainerNode = () => {\n    const { containerRef } = this.props\n\n    return (containerRef && containerRef.current) || null\n  }\n\n  subscribeEvents = () => {\n    this.geocoder.on('clear', this.handleClear)\n    this.geocoder.on('loading', this.handleLoading)\n    this.geocoder.on('results', this.handleResults)\n    this.geocoder.on('result', this.handleResult)\n    this.geocoder.on('error', this.handleError)\n  }\n\n  unsubscribeEvents = () => {\n    this.geocoder.off('clear', this.handleClear)\n    this.geocoder.off('loading', this.handleLoading)\n    this.geocoder.off('results', this.handleResults)\n    this.geocoder.off('result', this.handleResult)\n    this.geocoder.off('error', this.handleError)\n  }\n\n  removeGeocoder = () => {\n    const mapboxMap = this.getMapboxMap()\n\n    this.unsubscribeEvents()\n\n    if (mapboxMap && mapboxMap.removeControl) {\n      this.getMapboxMap().removeControl(this.geocoder)\n    }\n\n    this.geocoder = null\n  }\n\n  handleClear = () => {\n    this.cachedResult = null\n    this.props.onClear()\n  }\n\n  handleLoading = (event) => {\n    this.props.onLoading(event)\n  }\n\n  handleResults = (event) => {\n    this.props.onResults(event)\n  }\n\n  handleResult = (event) => {\n    const { result } = event\n    const { onViewportChange, onResult } = this.props\n    const { bbox, center, properties = {} } = result\n    const { short_code } = properties\n    const [longitude, latitude] = center\n    const bboxExceptions = {\n      fr: {\n        name: 'France',\n        bbox: [[-4.59235, 41.380007], [9.560016, 51.148506]]\n      },\n      us: {\n        name: 'United States',\n        bbox: [[-171.791111, 18.91619], [-66.96466, 71.357764]]\n      },\n      ru: {\n        name: 'Russia',\n        bbox: [[19.66064, 41.151416], [190.10042, 81.2504]]\n      },\n      ca: {\n        name: 'Canada',\n        bbox: [[-140.99778, 41.675105], [-52.648099, 83.23324]]\n      }\n    }\n    const { width, height } = this.getMapboxMap()\n      .getContainer()\n      .getBoundingClientRect()\n    let zoom = this.geocoder.options.zoom\n    const fitBounds = (bounds, viewport) => new WebMercatorViewport(viewport).fitBounds(bounds)\n\n    try {\n      if (!bboxExceptions[short_code] && bbox) {\n        zoom = fitBounds([[bbox[0], bbox[1]], [bbox[2], bbox[3]]], { width, height }).zoom\n      } else if (bboxExceptions[short_code]) {\n        zoom = fitBounds(bboxExceptions[short_code].bbox, { width, height }).zoom\n      }\n    } catch (e) {\n      console.warn('following result caused an error when trying to zoom to bbox: ', result) // eslint-disable-line\n      zoom = this.geocoder.options.zoom\n    }\n\n    onViewportChange({\n      longitude,\n      latitude,\n      zoom,\n      transitionInterpolator: new FlyToInterpolator(),\n      transitionDuration: 3000\n    })\n    onResult(event)\n\n    this.cachedResult = result\n    this.geocoder._typeahead.selected = null\n    this.showClearIcon()\n  }\n\n  handleError = (event) => {\n    this.props.onError(event)\n  }\n\n  getGeocoder() {\n    return this.geocoder\n  }\n\n  render() {\n    return null\n  }\n\n  static propTypes = {\n    mapRef: PropTypes.object.isRequired,\n    containerRef: PropTypes.object,\n    onViewportChange: PropTypes.func,\n    mapboxApiAccessToken: PropTypes.string.isRequired,\n    inputValue: PropTypes.string,\n    origin: PropTypes.string,\n    zoom: PropTypes.number,\n    placeholder: PropTypes.string,\n    proximity: PropTypes.object,\n    trackProximity: PropTypes.bool,\n    collapsed: PropTypes.bool,\n    clearAndBlurOnEsc: PropTypes.bool,\n    clearOnBlur: PropTypes.bool,\n    bbox: PropTypes.array,\n    types: PropTypes.string,\n    countries: PropTypes.string,\n    minLength: PropTypes.number,\n    limit: PropTypes.number,\n    language: PropTypes.string,\n    filter: PropTypes.func,\n    localGeocoder: PropTypes.func,\n    reverseGeocode: PropTypes.bool,\n    enableEventLogging: PropTypes.bool,\n    render: PropTypes.func,\n    getItemValue: PropTypes.func,\n    position: PropTypes.oneOf(VALID_POSITIONS),\n    onInit: PropTypes.func,\n    onClear: PropTypes.func,\n    onLoading: PropTypes.func,\n    onResults: PropTypes.func,\n    onResult: PropTypes.func,\n    onError: PropTypes.func\n  }\n\n  static defaultProps = {\n    onViewportChange: () => {},\n    origin: 'https://api.mapbox.com',\n    zoom: 16,\n    placeholder: 'Search',\n    trackProximity: false,\n    collapsed: false,\n    clearAndBlurOnEsc: false,\n    clearOnBlur: false,\n    minLength: 2,\n    limit: 5,\n    reverseGeocode: false,\n    enableEventLogging: true,\n    position: 'top-right',\n    onInit: () => {},\n    onClear: () => {},\n    onLoading: () => {},\n    onResults: () => {},\n    onResult: () => {},\n    onError: () => {}\n  }\n}\n\nexport default Geocoder\n"],"names":["Object","defineProperty","exports","value","b","Symbol","for","c","d","e","f","g","h","k","l","m","n","p","q","r","t","a","u","$$typeof","type","v","process","env","NODE_ENV","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","printWarning","format","_len","arguments","length","args","Array","_key","argIndex","message","replace","console","warn","Error","x","typeOf","object","$$typeofType","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isConcurrentMode","condition","undefined","_len2","_key2","apply","concat","lowPriorityWarning$1","module","require$$0","require$$1","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","TypeError","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","map","join","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","s","key","call","ReactPropTypesSecret","loggedTypeFailures","has","Function","bind","text","error","checkPropTypes","typeSpecs","values","location","componentName","getStack","typeSpecName","name","ex","stack","resetWarningCache","emptyFunctionThatReturnsNull","emptyFunction","emptyFunctionWithReset","isValidElement","throwOnDirectAccess","ITERATOR_SYMBOL","iterator","FAUX_ITERATOR_SYMBOL","ANONYMOUS","ReactPropTypes","array","createPrimitiveTypeChecker","bool","func","number","string","symbol","any","createChainableTypeChecker","arrayOf","typeChecker","props","propName","propFullName","PropTypeError","propValue","isArray","getPropType","element","elementType","ReactIs","isValidElementType","instanceOf","expectedClass","constructor","node","isNode","objectOf","propType","oneOf","expectedValues","is","valuesString","JSON","stringify","getPreciseType","oneOfType","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","shape","shapeTypes","exact","allKeys","y","this","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","secret","cacheKey","chainedCheckType","expectedType","every","iteratorFn","maybeIterable","getIteratorFn","step","entries","next","done","entry","RegExp","isSymbol","Date","PropTypes","isElement","shim","getShim","require$$2","fuzzy","simpleFilter","pattern","filter","str","test","match","opts","ch","patternIdx","result","len","totalScore","currScore","pre","post","compareString","caseSensitive","toLowerCase","idx","Infinity","rendered","score","arr","reduce","prev","extract","index","original","sort","List","component","items","active","wrapper","document","createElement","className","appendChild","selectingListItem","el","parentNode","insertBefore","nextSibling","show","style","display","hide","add","item","push","clear","isEmpty","isVisible","draw","innerHTML","drawItem","li","addEventListener","handleMouseUp","move","previous","drawError","msg","Suggestions","data","options","extend","minLength","limit","list","query","selected","handleKeyUp","keyCode","handleKeyDown","handleFocus","handleBlur","handlePaste","render","getItemValue","handleInputChange","preventDefault","clipboardData","getData","self","setTimeout","normalize","getCandidates","update","revisedData","candidate","indexOf","createEvent","initEvent","dispatchEvent","fireEvent","callback","sourceFormatting","boldString","indexString","indexOfQuery","lastIndexOf","endIndexOfQuery","slice","renderError","window","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","global","freeSelf","root","objectToString","toString","nativeMax","Math","max","nativeMin","min","now","isObject","toNumber","isObjectLike","other","valueOf","isBinary","fr","bbox","us","ru","ca","linkHeader","link","parsed","parts","linkUrl","linkParams","rel","parsedLinkParams","param","parseParam","url","params","parseLink","MapiResponse","request","responseData","headers","rawBody","body","statusCode","parse","parseError","links","parseLinkHeader","hasNextPage","nextPage","_extend","path","API_ORIGIN","EVENT_PROGRESS_DOWNLOAD","EVENT_PROGRESS_UPLOAD","EVENT_ERROR","EVENT_RESPONSE","ERROR_HTTP","ERROR_REQUEST_ABORTED","errorType","constants","requestsUnderway","normalizeBrowserProgressEvent","event","total","transferred","loaded","percent","freeExports","freeModule","InvalidCharacterError","TABLE","REGEX_SPACE_CHARACTERS","base64","encode","input","buffer","padding","output","position","charCodeAt","charAt","decode","bitStorage","bitCounter","version","nodeType","tokenCache","obj","token","usage","rawPayload","parsedPayload","parsePaylod","user","authorization","expires","exp","created","iat","scopes","client","lastLogin","ll","impersonator","iu","prefix","Events","EE","fn","context","once","addListener","emitter","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","names","listeners","handlers","ee","listenerCount","emit","a1","a2","a3","a4","a5","removeListener","j","on","removeAllListeners","off","prefixed","encodeValue","encodeURIComponent","appendQueryParam","punctuation","appendQueryObject","queryObject","prependOrigin","origin","delimiter","interpolateRouteParams","route","_","paramId","requestId","MapiRequest","method","defaultHeaders","headersWithDefaults","xtend","memo","id","_options","response","sent","aborted","file","accessToken","urlUtils","routeParams","accessTokenOwnerId","parseToken","ownerId","send","sendRequest","then","abort","_nextPageRequest","abortRequest","eachPage","handleResponse","nextPageRequest","getPage","handleError","clone","extendedOptions","MapiClient","createRequest","requestOptions","BrowserClient","Promise","resolve","xhr","XMLHttpRequest","open","setRequestHeader","createRequestXhr","reject","onprogress","upload","onerror","onabort","mapiError","MapiError","onload","status","raw","getAllResponseHeaders","trim","rawHeader","boundary","substring","parseSingleHeader","createResponse","sendRequestXhr","DEFAULT_ERROR_PATH","createArrayValidator","validators","validatingTuple","validationResult","plainArray","validator","processMessage","formatErrorMessage","nounPhrase","prettifyResult","orList","prettyResult","isArrayCulprit","assert","rootValidator","errorMessage","apiName","validatorObj","plainObject","errorMessages","objectId","strictShape","shapeValidator","shapeResult","invalidKeys","valueKey","tuple","required","requiredValidator","__required","messages","Boolean","equal","compareWith","range","boolean","getPrototypeOf","Blob","ArrayBuffer","pipe","date","getTime","isNaN","coordinates","assertShape","cb","objectMap","Geocoding","featureTypes","forwardGeocode","config","mode","countries","proximity","types","autocomplete","language","stringifyBooleans","country","pick","reverseGeocode","reverseMode","ServicePrototype","clientOrConfig","isPrototypeOf","createClient","service","crypto","msCrypto","MapboxEventManager","endpoint","access_token","sessionID","generateSessionID","userAgent","getUserAgent","locale","navigator","enableEventLogging","shouldEnableLogging","eventQueue","flushInterval","maxQueueSize","timer","flush","lastSentInput","lastSentIndex","select","geocoder","resultIndex","getSelectedIndex","payload","getEventPayload","resultPlaceName","place_name","resultId","queryString","start","keyevent","keyEvent","metaKey","lastAction","getRequestOptions","host","Content-Type","longitude","latitude","zoom","_map","getZoom","sessionIdentifier","mapZoom","keyboardLocale","inputString","_inputEl","xhttp","header","onreadystatechange","readyState","statusText","size","bytes","getRandomValues","Uint8Array","nanoid","_typeahead","selectedID","feature","localGeocoder","clearTimeout","forceFlush","remove","placeholder","de","it","en","nl","he","ja","lv","pt","sr","zh","cs","hu","ka","nb","sk","th","fi","ko","pl","sl","make","empty","tag","api","extlang","script","region","expose","enumerable","part","MapboxGeocoder","_eventEmitter","fresh","lastSelected","flyTo","trackProximity","marker","mapboxgl","collapsed","clearAndBlurOnEsc","clearOnBlur","placeName","splice","onAdd","setLanguage","geocoderService","mbxGeocoder","MapboxClient","eventManager","_onChange","_onKeyDown","_onBlur","_showButton","_hideButton","_onQueryResult","_updateProximity","_collapse","_unCollapse","_clear","_clearOnBlur","container","searchIcon","createIcon","setPlaceholder","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","remainingWait","debounced","isInvoking","leadingEdge","debounce","cancel","actions","classList","_clearEl","setAttribute","buttonIcon","_loadingEl","Typeahead","setRenderFunction","mapMarker","_handleMarker","_mapboxgl","icon","createElementNS","onRemove","removeChild","_removeMarker","ESC_KEY_CODE","TAB_KEY_CODE","blur","shadowRoot","activeElement","_geocode","flyOptions","properties","exceptions","short_code","fitBounds","center","focus","scrollLeft","setSelectionRange","searchInput","coords","parseFloat","reverse","localGeocoderRes","res","features","_renderNoResults","catch","_renderError","ev","relatedTarget","results","getCenter","wrap","setProximity","lng","lat","_renderMessage","_getPlaceholderText","firstLanguage","subtag","localizedValue","localization","setInput","getProximity","getRenderFunction","browserLocale","userLanguage","browserLanguage","getLanguage","setZoom","getFlyTo","setFlyTo","getPlaceholder","getBbox","setBbox","getCountries","setCountries","getTypes","setTypes","getMinLength","setMinLength","getLimit","setLimit","getFilter","setFilter","markerOptions","color","Marker","setLngLat","addTo","_classCallCheck","instance","Constructor","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","_typeof2","_typeof","_assertThisInitialized","ReferenceError","_getPrototypeOf","o","setPrototypeOf","_setPrototypeOf","_slicedToArray","arrayWithHoles","_arr","_n","_d","_e","_s","_i","iterableToArrayLimit","nonIterableRest","out","EPSILON","ARRAY_TYPE","Float32Array","transformVector","matrix","vector","z","w","vec4.transformMat4","vec4.scale","multiply","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b0","b1","b2","b3","translate","scale","equals","a0","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","abs","glMatrix.EPSILON","glMatrix.ARRAY_TYPE","PI","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","TILE_SIZE","EARTH_CIRCUMFERENCE","DEFAULT_ALTITUDE","zoomToScale","pow","lngLatToWorld","_ref","_ref2","Number","isFinite","log","tan","worldToLngLat","_ref3","_ref4","lambda2","phi2","atan","worldToPixels","xyz","pixelProjectionMatrix","_xyz2","_xyz2$","pixelsToWorld","pixelUnprojectionMatrix","targetZ","_xyz3","coord0","coord1","z0","z1","ax","ay","vec2.lerp","IDENTITY","Viewport","width","height","_ref$viewMatrix","viewMatrix","_ref$projectionMatrix","projectionMatrix","pixelsPerMeter","vpm","mat4.multiply","viewProjectionMatrix","mat4.scale","mat4.translate","mInverse","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","det","mat4.invert","project","unproject","projectPosition","unprojectPosition","projectFlat","unprojectFlat","viewport","mat4.equals","_ref2$topLeft","topLeft","worldPosition","coord","_coord","y2","_ref3$topLeft","_xyz","targetZWorld","_this$unprojectPositi","_this$unprojectPositi2","X","Y","Z","_this$projectFlat2","_this$unprojectFlat2","_ref$padding","_ref$offset","offset","_bounds","bounds","_bounds$","west","south","_bounds$2","east","north","top","bottom","left","right","WebMercatorViewport","nw","se","targetSize","scaleX","scaleY","centerLngLat","log2","_Viewport","_this","_ref$latitude","_ref$longitude","_ref$zoom","_ref$pitch","pitch","_ref$bearing","bearing","_ref$altitude","altitude","nearZMultiplier","farZMultiplier","_ref9","_getProjectionParamet","fovy","aspect","near","far","nf","fov","mat4.perspective","_ref8","_ref8$altitude","_ref8$pitch","_ref8$nearZMultiplier","_ref8$farZMultiplier","pitchRadians","halfFov","topHalfSurfaceDistance","sin","farZ","cos","focalDistance","getProjectionParameters","_ref7","_ref7$center","_ref7$flipY","flipY","vm","rad","mat4.rotateX","mat4.rotateZ","vec3.negate","getViewMatrix","assertThisInitialized","_possibleConstructorReturn","_ref6","_ref6$highPrecision","highPrecision","worldSize","latCosine","pixelsPerDegreeX","pixelsPerDegreeY","altPixelsPerMeter","metersPerPixel","pixelsPerDegree","degreesPerPixel","latCosine2","altPixelsPerDegree2","altPixelsPerMeter2","pixelsPerDegree2","pixelsPerMeter2","getDistanceScales","freeze","subClass","superClass","_inherits","lngLat","xy","fromLocation","pos","vec2.add","vec2.negate","getMapCenterByLngLatPosition","_fitBounds2","_fitBounds","VALID_POSITIONS","Geocoder","cachedResult","initializeGeocoder","mapboxMap","getMapboxMap","containerNode","getContainerNode","inputValue","onInit","mapboxApiAccessToken","subscribeEvents","addControl","find","_position","showClearIcon","mapRef","current","getMap","containerRef","handleClear","handleLoading","handleResults","handleResult","unsubscribeEvents","removeGeocoder","removeControl","onClear","onLoading","onResults","onViewportChange","onResult","bboxExceptions","getContainer","getBoundingClientRect","transitionInterpolator","FlyToInterpolator","transitionDuration","onError","componentDidMount","componentWillUnmount","componentDidUpdate","getGeocoder","PureComponent","propTypes","defaultProps"],"mappings":"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"}